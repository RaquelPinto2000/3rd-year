/*! For license information please see main.14c6fff2.chunk.js.LICENSE.txt */
(this["webpackJsonpargon-dashboard-react"]=this["webpackJsonpargon-dashboard-react"]||[]).push([[0],{127:function(e,a,t){e.exports=t.p+"media/administrative1.4847edaa.png"},132:function(e,a,t){e.exports=t.p+"media/bosch.95315fc4.png"},133:function(e,a,t){e.exports=t.p+"media/IT.a019a2b7.png"},134:function(e,a,t){e.exports=t.p+"media/UA.3a059c40.png"},195:function(e,a,t){},196:function(e,a,t){e.exports=t.p+"media/Logo.76c40006.png"},210:function(e,a,t){e.exports=t(481)},215:function(e,a,t){},217:function(e,a,t){},326:function(e,a,t){e.exports=t.p+"media/fundo.b9c09fdd.jpg"},451:function(e,a){},452:function(e,a){},453:function(e,a){},454:function(e,a){},455:function(e,a){},456:function(e,a){},457:function(e,a){},458:function(e,a){function t(e){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=458},459:function(e,a){},46:function(e,a,t){const n=t(33);n.elements.Rectangle.prototype.draw=function(){var e,a,t,n,l,s,r,c=this._chart.ctx,o=this._view,i=o.borderWidth;if(o.horizontal?(e=o.base,a=o.x,t=o.y-o.height/2,n=o.y+o.height/2,l=a>e?1:-1,s=1,r=o.borderSkipped||"left"):(e=o.x-o.width/2,a=o.x+o.width/2,t=o.y,l=1,s=(n=o.base)>t?1:-1,r=o.borderSkipped||"bottom"),i){var m=Math.min(Math.abs(e-a),Math.abs(t-n)),d=(i=i>m?m:i)/2,h=e+("left"!==r?d*l:0),p=a+("right"!==r?-d*l:0),u=t+("top"!==r?d*s:0),g=n+("bottom"!==r?-d*s:0);h!==p&&(t=u,n=g),u!==g&&(e=h,a=p)}c.beginPath(),c.fillStyle=o.backgroundColor,c.strokeStyle=o.borderColor,c.lineWidth=i;var E=[[e,n],[e,t],[a,t],[a,n]],b=["bottom","left","top","right"].indexOf(r,0);function f(e){return E[(b+e)%4]}-1===b&&(b=0);var N=f(0);c.moveTo(N[0],N[1]);for(var v=1;v<4;v++){N=f(v);let e=v+1;4===e&&(e=0);let a=E[2][0]-E[1][0],t=E[0][1]-E[1][1],n=E[1][0],l=E[1][1];var w;(w=6)>t/2&&(w=t/2),w>a/2&&(w=a/2),c.moveTo(n+w,l),c.lineTo(n+a-w,l),c.quadraticCurveTo(n+a,l,n+a,l+w),c.lineTo(n+a,l+t-w),c.quadraticCurveTo(n+a,l+t,n+a-w,l+t),c.lineTo(n+w,l+t),c.quadraticCurveTo(n,l+t,n,l+t-w),c.lineTo(n,l+w),c.quadraticCurveTo(n,l,n+w,l)}c.fill(),i&&c.stroke()};var l="Open Sans",s={100:"#f6f9fc",200:"#e9ecef",300:"#dee2e6",400:"#ced4da",500:"#adb5bd",600:"#8898aa",700:"#525f7f",800:"#32325d",900:"#212529"},r={default:"#172b4d",primary:"#5e72e4",secondary:"#f4f5f7",info:"#11cdef",success:"#2dce89",danger:"#f5365c",warning:"#fb6340"},c="#FFFFFF",o="transparent";let i={options:{scales:{yAxes:[{gridLines:{color:s[900],zeroLineColor:s[900]},ticks:{callback:function(e){if(!(e%10))return e+"k"}}}]},tooltips:{callbacks:{label:function(e,a){var t=a.datasets[e.datasetIndex].label||"",n=e.yLabel,l="";return a.datasets.length>1&&(l+=t),l+=n+"k"}}}},data1:e=>({labels:["May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Performance",data:[Math.floor(1e3*Math.random()),Math.floor(1e3*Math.random()),Math.floor(1e3*Math.random()),Math.floor(1e3*Math.random()),Math.floor(1e3*Math.random()),Math.floor(1e3*Math.random()),Math.floor(1e3*Math.random()),Math.floor(1e3*Math.random()),Math.floor(1e3*Math.random())]}]}),data2:e=>({labels:["May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Performance",data:[Math.floor(60*Math.random()),Math.floor(60*Math.random()),Math.floor(60*Math.random()),Math.floor(60*Math.random()),Math.floor(60*Math.random()),Math.floor(60*Math.random()),Math.floor(60*Math.random()),Math.floor(60*Math.random()),Math.floor(60*Math.random())]}]})},m={options:{scales:{yAxes:[{ticks:{callback:function(e){if(!(e%10))return e}}}]},tooltips:{callbacks:{label:function(e,a){var t=a.datasets[e.datasetIndex].label||"",n=e.yLabel,l="";return a.datasets.length>1&&(l+=t),l+=n}}}},data:{labels:["Lis","Port","Av","Leir","Vis","Faro"],datasets:[{label:"Sales",data:[Math.floor(60*Math.random()),Math.floor(60*Math.random()),Math.floor(60*Math.random()),Math.floor(60*Math.random()),Math.floor(60*Math.random()),Math.floor(60*Math.random())],maxBarThickness:10}]}};e.exports={chartOptions:function(){var e={defaults:{global:{responsive:!0,maintainAspectRatio:!1,defaultColor:s[600],defaultFontColor:s[600],defaultFontFamily:l,defaultFontSize:13,layout:{padding:0},legend:{display:!1,position:"bottom",labels:{usePointStyle:!0,padding:16}},elements:{point:{radius:0,backgroundColor:r.primary},line:{tension:.4,borderWidth:4,borderColor:r.primary,backgroundColor:o,borderCapStyle:"rounded"},rectangle:{backgroundColor:r.warning},arc:{backgroundColor:r.primary,borderColor:c,borderWidth:4}},tooltips:{enabled:!0,mode:"index",intersect:!1}},doughnut:{cutoutPercentage:83,legendCallback:function(e){var a=e.data,t="";return a.labels.forEach((function(e,n){var l=a.datasets[0].backgroundColor[n];t+='<span class="chart-legend-item">',t+='<i class="chart-legend-indicator" style="background-color: '+l+'"></i>',t+=e,t+="</span>"})),t}}}};return n.scaleService.updateScaleDefaults("linear",{gridLines:{borderDash:[2],borderDashOffset:[2],color:s[300],drawBorder:!1,drawTicks:!1,lineWidth:0,zeroLineWidth:0,zeroLineColor:s[300],zeroLineBorderDash:[2],zeroLineBorderDashOffset:[2]},ticks:{beginAtZero:!0,padding:10,callback:function(e){if(!(e%10))return e}}}),n.scaleService.updateScaleDefaults("category",{gridLines:{drawBorder:!1,drawOnChartArea:!1,drawTicks:!1},ticks:{padding:20}}),e},parseOptions:function e(a,t){for(var n in t)"object"!==typeof t[n]?a[n]=t[n]:e(a[n],t[n])},chartExample1:i,chartExample2:m}},464:function(e,a,t){e.exports=t.p+"media/accident_2021.ceff78ad.png"},480:function(e,a,t){e.exports=t.p+"media/Logo-white.6037d81b.png"},481:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),s=t(54),r=t.n(s),c=t(9),o=t(41),i=(t(215),t(216),t(217),t(483)),m=t(8),d=t.n(m),h=t(13),p=t(482),u=t(484),g=t(485),E=t(486),b=t(487),f=t(198),N=t(488),v=t(489),w=t(490),y=t(508),x=t(491),_=t(509),C=t(492);class k extends l.a.Component{constructor(e){var a;super(e),a=this,this.getData=Object(h.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/home");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,a.setState(e=>({Username:n.Username,email:n.email,about:n.about,address:n.address,birth_date:n.birth_date,country:n.country,first_name:n.first_name,last_name:n.last_name,postal_code:n.postal_code,profession:n.profession,telephone:n.telephone,work_institution:n.work_institution})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a.setState(e=>({error:"No accidents do Show"}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),this.state={user:[],Username:"",about:"",address:"",birth_date:"",city:"",country:"",email:"",first_name:"",last_name:"",postal_code:"",profession:"",telephone:"",work_institution:""}}componentDidMount(){this.getData()}render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{className:"navbar-top navbar-dark",expand:"md",id:"navbar-main"},l.a.createElement(i.a,{fluid:!0},l.a.createElement(c.b,{className:"h4 mb-0 text-white text-uppercase d-none d-lg-inline-block",to:"/"},this.props.brandText),l.a.createElement(u.a,{className:"navbar-search navbar-search-dark form-inline mr-3 d-none d-md-flex ml-lg-auto"},l.a.createElement(g.a,{className:"mb-0"},l.a.createElement(E.a,{className:"input-group-alternative"},l.a.createElement(b.a,{addonType:"prepend"},l.a.createElement(f.a,null,l.a.createElement("i",{className:"fas fa-search"}))),l.a.createElement(N.a,{placeholder:"Search",type:"text"})))),l.a.createElement(v.a,{className:"align-items-center d-none d-md-flex",navbar:!0},l.a.createElement(w.a,{nav:!0},l.a.createElement(y.a,{className:"pr-0",nav:!0},l.a.createElement(x.a,{className:"align-items-center"},l.a.createElement("span",{className:"avatar avatar-sm rounded-circle"},l.a.createElement("img",{alt:"...",src:t(127)})),l.a.createElement(x.a,{className:"ml-2 d-none d-lg-block"},l.a.createElement("span",{className:"mb-0 text-sm font-weight-bold"},this.state.Username)))),l.a.createElement(_.a,{className:"dropdown-menu-arrow",right:!0},l.a.createElement(C.a,{className:"noti-title",header:!0,tag:"div"},l.a.createElement("h6",{className:"text-overflow m-0"},"Welcome!")),l.a.createElement(C.a,{to:"/admin/user-profile",tag:c.b},l.a.createElement("i",{className:"ni ni-single-02"}),l.a.createElement("span",null,"My profile")),l.a.createElement(C.a,{divider:!0}),l.a.createElement(C.a,{to:"/auth/login",tag:c.b},">",l.a.createElement("i",{className:"ni ni-user-run"}),l.a.createElement("span",null,"Logout"))))))))}}var S=k,D=(t(57),t(493)),A=t(494);class O extends l.a.Component{render(){return l.a.createElement("footer",{className:"footer"},l.a.createElement(D.a,{className:"align-items-center justify-content-xl-between"},l.a.createElement(A.a,{xl:"6"},l.a.createElement("div",{className:"copyright text-center text-xl-left text-muted"},"2020"," ",l.a.createElement("a",{className:"font-weight-bold ml-1",href:"https://rodrigo740.github.io/",rel:"noopener noreferrer",target:"_blank"},"Project ARC"))),l.a.createElement(A.a,{xl:"2"},l.a.createElement("div",{className:"copyright text-center  text-muted"},l.a.createElement("a",{href:"https://www.bosch.pt/",target:"_blank"},l.a.createElement("img",{id:"grayscale",alt:"...",className:"grayscale",height:45,width:125,src:t(132)})))),l.a.createElement(A.a,{xl:"2"},l.a.createElement("div",{className:"copyright text-center  text-muted"},l.a.createElement("a",{href:"https://www.it.pt",target:"_blank"},l.a.createElement("img",{alt:"...",className:"grayscale",height:45,width:125,src:t(133)})))),l.a.createElement(A.a,{xl:"2"},l.a.createElement("div",{className:"copyright text-center  text-muted"},l.a.createElement("a",{href:"https://www.ua.pt",target:"_blank"},l.a.createElement("img",{alt:"...",className:"grayscale",height:45,width:125,src:t(134)}))))))}}var j=O,M=t(495),T=t(496),V=t(497),L=t(202);class I extends l.a.Component{constructor(e){var a;super(e),a=this,this.state={collapseOpen:!1},this.toggleCollapse=()=>{this.setState({collapseOpen:!this.state.collapseOpen})},this.closeCollapse=()=>{this.setState({collapseOpen:!1})},this.createLinks=e=>e.map((e,a)=>{if("/edit_profile"!=e.path&&"/register"!=e.path&&"/user-profile"!=e.path&&"/accident_details/:id"!=e.path&&"/login"!=e.path&&(0==this.state.role||"/users_table"!==e.path))return l.a.createElement(M.a,{key:a},l.a.createElement(T.a,{to:e.layout+e.path,tag:c.c,onClick:this.closeCollapse,activeClassName:"active"},l.a.createElement("i",{className:e.icon}),e.name))}),this.getData=Object(h.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/home");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,a.setState(e=>({Username:n.Username,email:n.email,about:n.about,address:n.address,birth_date:n.birth_date,country:n.country,city:n.city,first_name:n.first_name,last_name:n.last_name,postal_code:n.postal_code,profession:n.profession,telephone:n.telephone,work_institution:n.work_institution,role:n.role})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a.setState(e=>({error:"No accidents do Show"}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),this.activeRoute.bind(this),this.state={user:[],Username:"",about:"",address:"",birth_date:"",city:"",country:"",email:"",first_name:"",last_name:"",postal_code:"",profession:"",telephone:"",work_institution:"",role:""}}activeRoute(e){return this.props.location.pathname.indexOf(e)>-1?"active":""}componentDidMount(){this.getData()}render(){const e=this.props,a=(e.bgColor,e.routes),t=e.logo;let n;return t&&t.innerLink?n={to:t.innerLink,tag:c.b}:t&&t.outterLink&&(n={href:t.outterLink,target:"_blank"}),l.a.createElement(p.a,{className:"navbar-vertical fixed-left navbar-light bg-white",expand:"md",id:"sidenav-main"},l.a.createElement(i.a,{fluid:!0},l.a.createElement("button",{className:"navbar-toggler",type:"button",onClick:this.toggleCollapse},l.a.createElement("span",{className:"navbar-toggler-icon"})),t?l.a.createElement(V.a,Object.assign({className:"pt-0"},n),l.a.createElement("img",{alt:t.imgAlt,className:"navbar-brand-img",src:t.imgSrc})):null,l.a.createElement(v.a,{className:"align-items-center d-md-none"},l.a.createElement(w.a,{nav:!0},l.a.createElement(y.a,{nav:!0,className:"nav-link-icon"},l.a.createElement("i",{className:"ni ni-bell-55"})),l.a.createElement(_.a,{"aria-labelledby":"navbar-default_dropdown_1",className:"dropdown-menu-arrow",right:!0},l.a.createElement(C.a,null,"Action"),l.a.createElement(C.a,null,"Another action"),l.a.createElement(C.a,{divider:!0}),l.a.createElement(C.a,null,"Something else here"))),l.a.createElement(w.a,{nav:!0},l.a.createElement(y.a,{nav:!0},l.a.createElement(x.a,{className:"align-items-center"},l.a.createElement("span",{className:"avatar avatar-sm rounded-circle"},l.a.createElement("img",{alt:"..."})))),l.a.createElement(_.a,{className:"dropdown-menu-arrow",right:!0},l.a.createElement(C.a,{className:"noti-title",header:!0,tag:"div"},l.a.createElement("h6",{className:"text-overflow m-0"},"Welcome!")),l.a.createElement(C.a,{to:"/admin/user-profile",tag:c.b},l.a.createElement("i",{className:"ni ni-single-02"}),l.a.createElement("span",null,"My profile")),l.a.createElement(C.a,{to:"/admin/user-profile",tag:c.b},l.a.createElement("i",{className:"ni ni-settings-gear-65"}),l.a.createElement("span",null,"Settings")),l.a.createElement(C.a,{to:"/admin/user-profile",tag:c.b},l.a.createElement("i",{className:"ni ni-calendar-grid-58"}),l.a.createElement("span",null,"Activity")),l.a.createElement(C.a,{to:"/admin/user-profile",tag:c.b},l.a.createElement("i",{className:"ni ni-support-16"}),l.a.createElement("span",null,"Support")),l.a.createElement(C.a,{divider:!0}),l.a.createElement(C.a,{href:"#pablo",onClick:e=>e.preventDefault()},l.a.createElement("i",{className:"ni ni-user-run"}),l.a.createElement("span",null,"Logout"))))),l.a.createElement(L.a,{navbar:!0,isOpen:this.state.collapseOpen},l.a.createElement("div",{className:"navbar-collapse-header d-md-none"},l.a.createElement(D.a,null,t?l.a.createElement(A.a,{className:"collapse-brand",xs:"6"},t.innerLink?l.a.createElement(c.b,{to:t.innerLink},l.a.createElement("img",{alt:t.imgAlt,src:t.imgSrc})):l.a.createElement("a",{href:t.outterLink},l.a.createElement("img",{alt:t.imgAlt,src:t.imgSrc}))):null,l.a.createElement(A.a,{className:"collapse-close",xs:"6"},l.a.createElement("button",{className:"navbar-toggler",type:"button",onClick:this.toggleCollapse},l.a.createElement("span",null),l.a.createElement("span",null))))),l.a.createElement(u.a,{className:"mt-4 mb-3 d-md-none"},l.a.createElement(E.a,{className:"input-group-rounded input-group-merge"},l.a.createElement(N.a,{"aria-label":"Search",className:"form-control-rounded form-control-prepended",placeholder:"Search",type:"search"}),l.a.createElement(b.a,{addonType:"prepend"},l.a.createElement(f.a,null,l.a.createElement("span",{className:"fa fa-search"}))))),l.a.createElement(v.a,{navbar:!0},this.createLinks(a)))))}}I.defaultProps={routes:[{}]};var F=I,P=t(4),U=t.n(P),B=t(33),R=t.n(B),J=t(122),z=t(501),W=t(502),G=t(498),H=t(46),q=t(499);l.a.Component;var Q=t(45),Y=t(204),X=t(500);const Z=[{accidents:Math.floor(1e3*Math.random()),type:"ACCIDENTS",name_view:"Today",variation:(20*Math.random()-10).toFixed(2),classname_Arrow:"fa fa-arrow-up",classname_color:"text-success mr-2",since:"Since yesterday"},{accidents:Math.floor(1e3*Math.random()),type:"ACCIDENTS",name_view:"Week",variation:(20*Math.random()-10).toFixed(2),classname:"fa fa-arrow-up",classname_color:"text-success mr-2",since:"Since last week"},{accidents:Math.floor(1e3*Math.random()),type:"ACCIDENTS",name_view:"Month",variation:(20*Math.random()-10).toFixed(2),classname:"fa fa-arrow-up",classname_color:"text-success mr-2",since:"Since last month"}];var K=e=>{const a=Object(n.useState)(0),t=Object(Q.a)(a,2),s=t[0],r=t[1],c=Object(n.useState)(!1),o=Object(Q.a)(c,2),i=o[0],m=o[1],d=Z.map(a=>l.a.createElement(Y.a,{onExiting:()=>m(!0),onExited:()=>m(!1),key:a.src},l.a.createElement(G.a,null,l.a.createElement(D.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(q.a,{tag:"h5",className:"text-uppercase text-muted mb-0"},e.title),l.a.createElement("span",{className:"h2 font-weight-bold mb-0",id:"teste"},a.name_view+"\t\t"," ",a.accidents)),l.a.createElement(A.a,{className:"col-auto"},l.a.createElement("div",{className:e.icon_name},l.a.createElement("i",{className:e.icon})))),l.a.createElement("p",{className:"mt-3 mb-0 text-muted text-sm"},l.a.createElement("span",{id:"span1",className:a.classname_color},l.a.createElement("i",{id:"i1",className:a.classname_Arrow})," ",a.variation,"%")," ",l.a.createElement("span",{className:"text-nowrap"},a.since)))));return l.a.createElement(X.a,{activeIndex:s,next:()=>{if(i)return;const e=s===Z.length-1?0:s+1;Z[e].variation>0?(Z[e].classname_Arrow="fa fa-arrow-up",Z[e].classname_color="text-success mr-2"):(Z[e].classname_Arrow="fa fa-arrow-down",Z[e].classname_color="text-warning mr-2"),r(e)},previous:()=>{if(i)return;const e=0===s?Z.length-1:s-1;r(e)}},d)};class $ extends l.a.Component{render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"header bg-gradient-info pb-8 pt-5 pt-md-8"},l.a.createElement(i.a,{fluid:!0},l.a.createElement("div",{className:"header-body"},l.a.createElement(D.a,null,l.a.createElement(A.a,{lg:"6",xl:"3"},l.a.createElement(z.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(K,{title:"Reports",icon_name:"icon icon-shape bg-purple text-white rounded-circle shadow",icon:"fas fa-chart-bar"}))),l.a.createElement(A.a,{lg:"6",xl:"3"},l.a.createElement(z.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(K,{title:"Accidents",icon_name:"icon icon-shape bg-red text-white rounded-circle shadow",icon:"fas fa-car-crash"}))),l.a.createElement(A.a,{lg:"6",xl:"3"},l.a.createElement(z.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(K,{title:"Users",icon_name:"icon icon-shape bg-yellow text-white rounded-circle shadow",icon:"fas fa-users"}))),l.a.createElement(A.a,{lg:"6",xl:"3"},l.a.createElement(z.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(K,{title:"Medical care",icon_name:"icon icon-shape bg-blue text-white rounded-circle shadow",icon:"fas fa-ambulance"}))))))))}}var ee=$;class ae extends l.a.Component{constructor(e){super(e),this.toggleNavs=(e,a)=>{e.preventDefault(),this.setState({activeNav:a,chartExample1Data:"data1"===this.state.chartExample1Data?"data2":"data1"})},this.state={activeNav:1,chartExample1Data:"data1"},window.Chart&&Object(H.parseOptions)(R.a,Object(H.chartOptions)())}render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(ee,null),l.a.createElement(i.a,{className:"mt--7",fluid:!0},l.a.createElement(D.a,null,l.a.createElement(A.a,{className:"mb-5 mb-xl-0",xl:"8"},l.a.createElement(z.a,{className:"bg-gradient-default shadow"},l.a.createElement(W.a,{className:"bg-transparent"},l.a.createElement(D.a,{className:"align-items-center"},l.a.createElement("div",{className:"col"},l.a.createElement("h6",{className:"text-uppercase text-light ls-1 mb-1"},"Overview"),l.a.createElement("h2",{className:"text-white mb-0"},"Accidents")),l.a.createElement("div",{className:"col"},l.a.createElement(v.a,{className:"justify-content-end",pills:!0},l.a.createElement(M.a,null,l.a.createElement(T.a,{className:U()("py-2 px-3",{active:1===this.state.activeNav}),href:"#pablo",onClick:e=>this.toggleNavs(e,1)},l.a.createElement("span",{className:"d-none d-md-block"},"Month"),l.a.createElement("span",{className:"d-md-none"},"M"))),l.a.createElement(M.a,null,l.a.createElement(T.a,{className:U()("py-2 px-3",{active:2===this.state.activeNav}),"data-toggle":"tab",href:"#pablo",onClick:e=>this.toggleNavs(e,2)},l.a.createElement("span",{className:"d-none d-md-block"},"Week"),l.a.createElement("span",{className:"d-md-none"},"W"))))))),l.a.createElement(G.a,null,l.a.createElement("div",{className:"chart"},l.a.createElement(J.b,{data:H.chartExample1[this.state.chartExample1Data],options:H.chartExample1.options,getDatasetAtEvent:e=>console.log(e)}))))),l.a.createElement(A.a,{xl:"4"},l.a.createElement(z.a,{className:"shadow"},l.a.createElement(W.a,{className:"bg-transparent"},l.a.createElement(D.a,{className:"align-items-center"},l.a.createElement("div",{className:"col"},l.a.createElement("h6",{className:"text-uppercase text-muted ls-1 mb-1"},"Performance"),l.a.createElement("h2",{className:"mb-0"},"Accidents by Discticts")))),l.a.createElement(G.a,null,l.a.createElement("div",{className:"chart"},l.a.createElement(J.a,{data:H.chartExample2.data,options:H.chartExample2.options}))))))))}}var te=ae,ne=t(199);class le extends l.a.Component{constructor(e){var a;super(e),a=this,this.getData=Object(h.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/home");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,a.setState(e=>({user:n})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a.setState(e=>({error:"No accidents do Show"}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),this.state={user:[]}}componentDidMount(){this.getData()}render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"header pb-8 pt-5 pt-lg-8 d-flex align-items-center",style:{minHeight:"300px",backgroundImage:"url("+t(326)+")",backgroundSize:"cover",backgroundPosition:"center top"}},l.a.createElement("span",{className:"mask bg-gradient-default opacity-8"}),l.a.createElement(i.a,{className:"d-flex align-items-center",fluid:!0},l.a.createElement(D.a,null,l.a.createElement(A.a,{lg:"7",md:"10"},l.a.createElement("h1",{className:"display-2 text-white"},"Hello ",this.state.user.Username))))))}}var se=le;class re extends l.a.Component{constructor(e){var a;super(e),a=this,this.onEditProfile=()=>l.a.createElement(o.a,{to:"/admin/edit_profile"}),this.getData=Object(h.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/home");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,a.setState(e=>({user:n})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a.setState(e=>({error:"No accidents do Show"}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),this.state={user:[]}}componentDidMount(){this.getData()}render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(se,null),l.a.createElement(i.a,{className:"mt--7",fluid:!0},l.a.createElement(D.a,null,l.a.createElement(A.a,null,l.a.createElement(z.a,{className:"card-profile shadow"},l.a.createElement(D.a,{className:"justify-content-center"},l.a.createElement(A.a,{className:"order-lg-2",lg:"3"},l.a.createElement("div",{className:"card-profile-image"},l.a.createElement("a",{href:"#pablo",onClick:e=>e.preventDefault()},l.a.createElement("img",{alt:"...",className:"rounded-circle",src:t(127)}))))),l.a.createElement(W.a,{className:"text-center border-0 pt-8 pt-md-4 pb-0 pb-md-4"},l.a.createElement("div",{className:"d-flex justify-content-end"},l.a.createElement(ne.a,{color:"default",href:"/#admin/edit_profile",onClick:this.onEditProfile,size:"sm"},"Edit profile"))),l.a.createElement(G.a,{className:"pt-0 pt-md-4"},l.a.createElement(D.a,null,l.a.createElement("div",{className:"col"},l.a.createElement("div",{className:"card-profile-stats d-flex justify-content-center mt-md-5"}))),l.a.createElement("div",{className:"text-center"},l.a.createElement("h3",null,this.state.user.first_name,l.a.createElement("span",{className:"font-weight-light"},", 27")),l.a.createElement("div",{className:"h5 font-weight-300"},l.a.createElement("i",{className:"ni location_pin mr-2"}),this.state.user.city),l.a.createElement("div",{className:"h5 mt-4"},l.a.createElement("i",{className:"ni business_briefcase-24 mr-2"}),this.state.user.profession),l.a.createElement("div",null,l.a.createElement("i",{className:"ni education_hat mr-2"}),this.state.user.work_institution),l.a.createElement("hr",{className:"my-4"}),l.a.createElement("p",null,this.state.user.about),l.a.createElement("a",{href:"#pablo",onClick:e=>e.preventDefault()},"Show more"))))))))}}var ce=re,oe=t(32);function ie(e){const a=Object(n.useState)(null),t=Object(Q.a)(a,2),s=t[0],r=t[1],c=e.origem,o=e.destino,i=e.travelMode;return Object(n.useEffect)(()=>{(new google.maps.DirectionsService).route({origin:new google.maps.LatLng(c.lat,c.lng),destination:new google.maps.LatLng(o.lat,o.lng),travelMode:i},(e,a)=>{a===google.maps.DirectionsStatus.OK?r(e):console.error("error fetching directions ".concat(e))})},[c]),l.a.createElement(l.a.Fragment,null,s&&l.a.createElement(oe.DirectionsRenderer,{directions:s,options:{suppressMarkers:!0,preserveViewport:!0}}))}const me=Object(oe.withScriptjs)(Object(oe.withGoogleMap)(e=>l.a.createElement(oe.GoogleMap,{defaultCenter:e.defaultCenter,defaultZoom:e.zoom,defaultOptions:{scrollwheel:!1}},e.markers.map((e,a)=>l.a.createElement(oe.Marker,{position:{lat:e.lat,lng:e.lng},key:a,id:a,options:{icon:"/accident_icon/".concat(e.status)},onClick:()=>{e.id&&(window.location.href="/#admin/accident_details/".concat(e.id))}})))));function de(){return console.log("center"+this.getCenter()),this.getCenter()}const he=Object(oe.withScriptjs)(Object(oe.withGoogleMap)(e=>l.a.createElement(oe.GoogleMap,{center:e.center,zoom:e.zoom,defaultOptions:{scrollwheel:!1},onCenterChanged:de},",",l.a.createElement(ie,{destino:e.origem,origem:e.destino,travelMode:google.maps.TravelMode.DRIVING}),e.markers.map((e,a)=>l.a.createElement(oe.Marker,{position:{lat:e.lat,lng:e.lng},key:a,id:a,options:{icon:"/accident_icon/".concat(e.status)},onClick:()=>{var a,t;e.id&&5==e.status&&(a=e.id_acc,t=e.id,console.log("Marker clicked!"),fetch("/startStream/".concat(a,"/").concat(t)))}})))));class pe extends l.a.Component{constructor(e){super(e),this.get_my_location=()=>navigator.geolocation?new Promise((e,a)=>navigator.geolocation.getCurrentPosition(e,a)):new Promise(e=>e({})),this.state={lat:0,lng:0}}componentDidMount(){Promise.all([this.get_my_location()]).then(e=>{this.setState({lat:e[0].coords.latitude,lng:e[0].coords.longitude})})}render(){return this.props.center?l.a.createElement(he,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyA03XhgCxn-V9TsghBLpQ8LaScQLPgIJxs",loadingElement:l.a.createElement("div",{style:{height:"100%"}}),center:this.props.center,zoom:this.props.zoom,markers:this.props.markers,origem:this.props.origem,destino:this.props.destino,containerElement:l.a.createElement("div",{className:"map-canvas",id:"map-canvas"}),mapElement:this.props.mapElement}):l.a.createElement(me,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyA03XhgCxn-V9TsghBLpQ8LaScQLPgIJxs",loadingElement:l.a.createElement("div",{style:{height:"100%"}}),defaultCenter:this.state,zoom:this.props.zoom,markers:this.props.markers,containerElement:l.a.createElement("div",{className:"map-canvas",id:"map-canvas"}),mapElement:this.props.mapElement})}}var ue=pe;var ge=()=>{const e=Object(n.useState)([]),a=Object(Q.a)(e,2),t=a[0],s=a[1];Object(n.useEffect)(()=>{const e=setInterval(()=>{r().then(e=>{s(e)})},2e3);return()=>clearInterval(e)},[]);const r=function(){var e=Object(h.a)(d.a.mark((function e(){var a,t,n,l,s,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/list_accidents");case 2:return a=e.sent,e.next=5,a.json();case 5:return t=e.sent,e.next=8,fetch("/list_ambulances");case 8:return n=e.sent,e.next=11,n.json();case 11:for(l=e.sent,s=[],r=0;r<t.length;r++)s.push({lat:t[r].location.lat,lng:t[r].location.lng,id:t[r].id,status:t[r].status});for(r=0;r<l.length;r++)s.push({lat:l[r].latitude,lng:l[r].longitude,id:l[r].car_id,status:3});return e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement(ee,null),l.a.createElement(i.a,{className:"mt--7",fluid:!0},l.a.createElement(D.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(z.a,{className:"shadow border-0"},l.a.createElement(ue,{markers:t,zoom:10,mapElement:l.a.createElement("div",{style:{height:"100%",borderRadius:"inherit"}})}))))))};class Ee extends l.a.Component{constructor(e){super(e),this.state={username:"",email:"",passwd:"",remember:"False",error:!1},this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}handleChange(e){const a=e.target,t=a.value,n=a.name;this.setState({[n]:t})}handleSubmit(e){e.preventDefault(),fetch("/register_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.state.username,email:this.state.email,password:this.state.passwd})}).then(e=>e.json()).then(e=>{"Done"==e.response?this.props.history.push("/admin"):this.setState({error:e.error})},e=>{this.setState({isLoaded:!0,error:"Invalid user or email. Please contact the Administrator"})})}render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(A.a,{lg:"6",md:"8"},l.a.createElement(z.a,{className:"bg-secondary shadow border-0"},l.a.createElement(G.a,{className:"px-lg-5 py-lg-5"},l.a.createElement("div",{className:"text-center text-muted mb-4"},l.a.createElement("small",null,"Sign up with credentials")),l.a.createElement(u.a,{role:"form"},l.a.createElement(g.a,null,l.a.createElement(E.a,{className:"input-group-alternative mb-3"},l.a.createElement(b.a,{addonType:"prepend"},l.a.createElement(f.a,null,l.a.createElement("i",{className:"ni ni-hat-3"}))),l.a.createElement(N.a,{placeholder:"Username",name:"username",type:"username",value:this.state.username,onChange:this.handleChange,autoComplete:"new-email"}))),l.a.createElement(g.a,null,l.a.createElement(E.a,{className:"input-group-alternative mb-3"},l.a.createElement(b.a,{addonType:"prepend"},l.a.createElement(f.a,null,l.a.createElement("i",{className:"ni ni-email-83"}))),l.a.createElement(N.a,{placeholder:"Email",name:"email",type:"email",value:this.state.email,onChange:this.handleChange,autoComplete:"new-email"}))),l.a.createElement(g.a,null,l.a.createElement(E.a,{className:"input-group-alternative"},l.a.createElement(b.a,{addonType:"prepend"},l.a.createElement(f.a,null,l.a.createElement("i",{className:"ni ni-lock-circle-open"}))),l.a.createElement(N.a,{placeholder:"Password",type:"password",name:"passwd",value:this.state.passwd,onChange:this.handleChange,autoComplete:"new-password"}))),this.state.error&&l.a.createElement("p",{style:{color:"red"}}," Register Failed. ",this.state.error," "),l.a.createElement(D.a,{className:"my-4"},l.a.createElement(A.a,{xs:"12"},l.a.createElement("div",{className:"custom-control custom-control-alternative custom-checkbox"},l.a.createElement("input",{className:"custom-control-input",id:"customCheckRegister",type:"checkbox"}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"customCheckRegister"},l.a.createElement("span",{className:"text-muted"},"I agree with the"," ",l.a.createElement("a",{href:"#pablo",onClick:e=>e.preventDefault()},"Privacy Policy")))))),l.a.createElement("div",{className:"text-center"},l.a.createElement(ne.a,{className:"my-4",color:"primary",type:"submit",onClick:this.handleSubmit},"Create account")))))))}}var be=Ee;class fe extends l.a.Component{constructor(e){super(e),this.onCreateAccount=()=>l.a.createElement(o.a,{to:"/auth/Register"}),this.state={email:"",passwd:"",remember:"False",error:!1},this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}handleChange(e){const a=e.target,t=a.value,n=a.name;this.setState({[n]:t})}handleSubmit(e){e.preventDefault(),fetch("/login/request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.state.email,passwd:this.state.passwd})}).then(e=>e.json()).then(e=>{"Done"==e.response?this.props.history.push("/admin"):this.setState({error:e.error})},e=>{this.setState({isLoaded:!0,error:"error"})})}render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(A.a,{lg:"5",md:"7"},l.a.createElement(z.a,{className:"bg-secondary shadow border-0"},l.a.createElement(G.a,{className:"px-lg-5 py-lg-5"},l.a.createElement("div",{className:"text-center text-muted mb-4"},l.a.createElement("small",null,"Sign in with credentials")),l.a.createElement(u.a,{role:"form"},l.a.createElement(g.a,{className:"mb-3"},l.a.createElement(E.a,{className:"input-group-alternative"},l.a.createElement(b.a,{addonType:"prepend"},l.a.createElement(f.a,null,l.a.createElement("i",{className:"ni ni-email-83"}))),l.a.createElement(N.a,{placeholder:"Email",name:"email",type:"email",value:this.state.email,onChange:this.handleChange,autoComplete:"new-email"}))),l.a.createElement(g.a,null,l.a.createElement(E.a,{className:"input-group-alternative"},l.a.createElement(b.a,{addonType:"prepend"},l.a.createElement(f.a,null,l.a.createElement("i",{className:"ni ni-lock-circle-open"}))),l.a.createElement(N.a,{placeholder:"Password",type:"password",name:"passwd",value:this.state.passwd,onChange:this.handleChange,autoComplete:"new-password"}))),this.state.error&&l.a.createElement("p",{style:{color:"red"}}," Login Failed. ",this.state.error," "),l.a.createElement("div",{className:"custom-control custom-control-alternative custom-checkbox"},l.a.createElement("input",{className:"custom-control-input",id:" customCheckLogin",type:"checkbox"}),l.a.createElement("label",{className:"custom-control-label",htmlFor:" customCheckLogin"},l.a.createElement("span",{className:"text-muted"},"Remember me"))),l.a.createElement("div",{className:"text-center"},l.a.createElement(ne.a,{className:"my-4",color:"primary",type:"submit",onClick:this.handleSubmit},"Sign in"))))),l.a.createElement(D.a,{className:"mt-3"},l.a.createElement(A.a,{xs:"6"},l.a.createElement("a",{className:"text-light",href:"#pablo",onClick:e=>e.preventDefault()},l.a.createElement("small",null,"Forgot password?"))),l.a.createElement(A.a,{className:"text-right",xs:"6"},l.a.createElement("a",{className:"text-light",href:"/#auth/register",onClick:this.onCreateAccount},l.a.createElement("small",null,"Create new account"))))))}}var Ne=fe,ve=t(503),we=t(504),ye=t(505),xe=t(506);function _e(e){let a=e.split("T");return[a[0],a[1].split(".")[0]]}class Ce extends l.a.Component{constructor(e){var a;super(e),a=this,this.redirect_to_details=e=>l.a.createElement(o.a,{to:"/admin/accident_details/".concat(e)}),this.getData=function(){var e=Object(h.a)(d.a.mark((function e(t){var n,l,s,r,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/num_accidents?quantity=".concat(a.state.dropdownIndex2));case 3:return n=e.sent,e.next=6,n.json();case 6:return l=e.sent,a.setState(e=>({num_accidents:l})),e.next=10,fetch("/range_accidents?id=".concat(t,"&filter=").concat(a.state.dropdownIndex,"&quantity=").concat(a.state.dropdownIndex2,"&order=").concat(a.state.dropdownIndex3));case 10:return s=e.sent,e.next=13,s.json();case 13:return 0==(r=e.sent).length?a.setState(e=>({error:"No accidents do Show"})):a.setState(e=>({table_data:r,error:!1})),e.next=17,fetch("/home");case 17:return c=e.sent,e.next=20,c.json();case 20:o=e.sent,a.setState(e=>({role:o.role})),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),a.setState(e=>({error:"No accidents do Show"}));case 27:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(a){return e.apply(this,arguments)}}(),this.setStatus=e=>2===e?l.a.createElement(ve.a,{color:"",className:"badge-dot badge-lg"},l.a.createElement("i",{className:"bg-lime"})):1===e?l.a.createElement(ve.a,{color:"",className:"badge-dot badge-lg"},l.a.createElement("i",{className:"bg-yellow"})):l.a.createElement(ve.a,{color:"",className:"badge-dot badge-lg"},l.a.createElement("i",{className:"bg-red"})),this.setFire=e=>1===e?l.a.createElement(ve.a,{color:"",className:"badge-dot badge-lg"},l.a.createElement("i",{className:"bg-red"})):l.a.createElement(ve.a,{color:"",className:"badge-dot badge-lg"},l.a.createElement("i",{className:"bg-lime"})),this.renderArray=(e,a)=>l.a.createElement("tr",{key:a},l.a.createElement("th",{scope:"row"},l.a.createElement("span",{className:"mb-0 text-sm"},_e(e.date)[0],l.a.createElement("br",null),_e(e.date)[1])),l.a.createElement("th",{scope:"row",width:"5%"},l.a.createElement("span",{className:"mb-0 text-sm"},e.location.address.substring(0,45))),l.a.createElement("th",{scope:"row",width:"5%"},l.a.createElement("span",{className:"mb-0 text-sm"},e.city)),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement("span",{className:"mb-0 text-sm"},e.n_cars_involved)),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement("span",{className:"mb-0 text-sm"},e.n_people)),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement("span",{className:"mb-0 text-sm"},e.n_people_injured)),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement("span",{className:"mr-2"},e.damage),l.a.createElement("div",null,l.a.createElement(we.a,{max:"100",value:e.damage,barClassName:this.getBarColor(e.damage)}))),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},this.setStatus(e.status)),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},this.setFire(e.fire)),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement(ne.a,{className:"icon icon-shape bg-transparent border-default text-white rounded-circle",href:"/#admin/accident_details/".concat(e.id),onClick:this.redirect_to_details.bind(this,e.id)},l.a.createElement("i",{className:"fas fa-ellipsis-h"})),0==this.state.role&&l.a.createElement(ne.a,{className:"icon icon-shape border-default bg-transparent text-danger ",type:"button",onClick:a=>this.handleDelete(e.id)},l.a.createElement("i",{className:"fas fa-trash"})))),this.handleClick=(e,a)=>{e.preventDefault(),this.state.curent_page=a,this.getData(a)},this.timer=null,this.toggleDrop1=this.toggleDrop1.bind(this),this.changeValueDrop1=this.changeValueDrop1.bind(this),this.toggleDrop2=this.toggleDrop2.bind(this),this.changeValueDrop2=this.changeValueDrop2.bind(this),this.toggleDrop3=this.toggleDrop3.bind(this),this.changeValueDrop3=this.changeValueDrop3.bind(this),this.state={table_data:[],table_buttons:[],curent_page:1,num_accidents:0,num_to_show:10,dropDown1Value:"Date/Hour",dropdownIndex:"between",dropdownIndex2:"All",dropdownIndex3:"Descending",dropDown1Open:!1,dropDown2Value:"From",dropDown2Open:!1,dropDown3Value:"Order by",dropDown3Open:!1,error:!1,role:1}}getBarColor(e){return e<30?"bg-gradient-success":e<45?"bg-gradient-info":e<75?"bg-gradient-warning":"bg-gradient-danger"}handleDelete(e){fetch("/delete_accident/"+e,{method:"POST"}).then(e=>e.json()).then(e=>{console.log(e),this.getData()})}renderButtons(){if(this.state.num_accidents>this.state.num_to_show){const e=[];this.state.curent_page>1&&e.push(l.a.createElement("li",{className:"page-item"},l.a.createElement("a",{className:"page-link",onClick:e=>this.handleClick(e,this.state.curent_page-1)},l.a.createElement("i",{className:"fas fa-angle-left"}))));for(let a=1;a<Math.ceil(this.state.num_accidents/this.state.num_to_show)+1;a++)a==this.state.curent_page?e.push(l.a.createElement("li",{className:"page-item active"},l.a.createElement("a",{className:"page-link",onClick:e=>this.handleClick(e,"".concat(a))},a))):e.push(l.a.createElement("li",{className:"page-item"},l.a.createElement("a",{className:"page-link",onClick:e=>this.handleClick(e,"".concat(a))},a)));return this.state.curent_page<Math.ceil(this.state.num_accidents/this.state.num_to_show)&&e.push(l.a.createElement("li",{className:"page-item"},l.a.createElement("a",{className:"page-link",onClick:e=>this.handleClick(e,parseInt(this.state.curent_page)+1)},l.a.createElement("i",{className:"fas fa-angle-right"})))),l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("nav",{"aria-label":"Page navigation example"},l.a.createElement("ul",{className:"pagination"},e)))}}componentDidMount(){this.getData(this.state.curent_page),this.timer=setInterval(()=>this.getData(this.state.curent_page),1e4)}componentWillUnmount(){clearInterval(this.timer),this.timer=null}toggleDrop1(){this.setState({dropDown1Open:!this.state.dropDown1Open})}toggleDrop2(){this.setState({dropDown2Open:!this.state.dropDown2Open})}toggleDrop3(){this.setState({dropDown3Open:!this.state.dropDown3Open})}changeValueDrop1(e,a){this.state.dropDown1Value=e.currentTarget.textContent,this.state.dropdownIndex="".concat(["","between","cars","people","injured","severity","status","fire"][a]),this.getData(this.state.curent_page)}changeValueDrop2(e,a){this.state.dropDown2Value=e.currentTarget.textContent,this.state.dropdownIndex2="".concat(a),this.getData(this.state.curent_page)}changeValueDrop3(e,a){this.state.dropDown3Value=e.currentTarget.textContent,this.state.dropdownIndex3="".concat(a),this.getData(this.state.curent_page)}render(){return this.state.error?l.a.createElement(l.a.Fragment,null,l.a.createElement(ee,null),l.a.createElement(i.a,{className:"mt--7",fluid:!0},l.a.createElement(D.a,{className:"mt-5"},l.a.createElement("div",{className:"col"},l.a.createElement(z.a,{className:"bg-default shadow"},l.a.createElement(W.a,{className:"bg-transparent border-0"},l.a.createElement(D.a,null,l.a.createElement(A.a,null,l.a.createElement("div",{className:"row ml"},l.a.createElement("h1",{className:"text-white mb-0",style:{paddingLeft:20}},"Accidents"))),l.a.createElement(A.a,null,this.renderButtons()),l.a.createElement(A.a,null,l.a.createElement("div",{className:"row justify-content-end"},l.a.createElement("h4",{className:"mr-2 mt-2 text-white"},"Sort by: "),l.a.createElement(ye.a,{isOpen:this.state.dropDown1Open,toggle:this.toggleDrop1},l.a.createElement(y.a,{caret:!0},this.state.dropDown1Value),l.a.createElement(_.a,{right:!0},l.a.createElement(C.a,{onClick:e=>this.changeValueDrop1(e,1)},"Date/Hour"),l.a.createElement(C.a,{onClick:e=>this.changeValueDrop1(e,2)},"N\xba cars"),l.a.createElement(C.a,{onClick:e=>this.changeValueDrop1(e,3)},"N\xba people"),l.a.createElement(C.a,{onClick:e=>this.changeValueDrop1(e,4)},"N\xba injured"),l.a.createElement(C.a,{onClick:e=>this.changeValueDrop1(e,5)},"Severity"),l.a.createElement(C.a,{onClick:e=>this.changeValueDrop1(e,6)},"Status"),l.a.createElement(C.a,{onClick:e=>this.changeValueDrop1(e,7)},"Fire"))),l.a.createElement(ye.a,{className:"mr-2 ml-2",isOpen:this.state.dropDown2Open,toggle:this.toggleDrop2},l.a.createElement(y.a,{caret:!0},this.state.dropDown2Value),l.a.createElement(_.a,{right:!0},l.a.createElement(C.a,{onClick:e=>this.changeValueDrop2(e,"Today")},"Today"),l.a.createElement(C.a,{onClick:e=>this.changeValueDrop2(e,"Yesterday")},"Yesterday"),l.a.createElement(C.a,{onClick:e=>this.changeValueDrop2(e,"Last Month")},"Last Month"),l.a.createElement(C.a,{onClick:e=>this.changeValueDrop2(e,"All")},"All"))),l.a.createElement(ye.a,{isOpen:this.state.dropDown3Open,toggle:this.toggleDrop3},l.a.createElement(y.a,{caret:!0},this.state.dropDown3Value),l.a.createElement(_.a,{right:!0},l.a.createElement(C.a,{onClick:e=>this.changeValueDrop3(e,"Ascending")},"Ascending"),l.a.createElement(C.a,{onClick:e=>this.changeValueDrop3(e,"Descending")},"Descending"))))))),l.a.createElement("h1",{className:"text-white mb-0",style:{textAlign:"center"}}," ",this.state.error),l.a.createElement("br",null)))))):l.a.createElement(l.a.Fragment,null,l.a.createElement(ee,null),l.a.createElement(i.a,{className:"mt--7",fluid:!0},l.a.createElement(D.a,{className:"mt-5"},l.a.createElement("div",{className:"col"},l.a.createElement(z.a,{className:"bg-default shadow"},l.a.createElement(W.a,{className:"bg-transparent border-0"},l.a.createElement(D.a,null,l.a.createElement(A.a,null,l.a.createElement("div",{className:"row ml"},l.a.createElement("h1",{className:"text-white mb-0",style:{paddingLeft:20}},"Accidents"))),l.a.createElement(A.a,null,this.renderButtons()),l.a.createElement(A.a,null,l.a.createElement("div",{className:"row justify-content-end"},l.a.createElement("h4",{className:"mr-2 mt-2 text-white"},"Sort by: "),l.a.createElement(ye.a,{isOpen:this.state.dropDown1Open,toggle:this.toggleDrop1},l.a.createElement(y.a,{caret:!0},this.state.dropDown1Value),l.a.createElement(_.a,{right:!0},l.a.createElement(C.a,{onClick:e=>this.changeValueDrop1(e,1)},"Date/Hour"),l.a.createElement(C.a,{onClick:e=>this.changeValueDrop1(e,2)},"N\xba cars"),l.a.createElement(C.a,{onClick:e=>this.changeValueDrop1(e,3)},"N\xba people"),l.a.createElement(C.a,{onClick:e=>this.changeValueDrop1(e,4)},"N\xba injured"),l.a.createElement(C.a,{onClick:e=>this.changeValueDrop1(e,5)},"Severity"),l.a.createElement(C.a,{onClick:e=>this.changeValueDrop1(e,6)},"Status"),l.a.createElement(C.a,{onClick:e=>this.changeValueDrop1(e,7)},"Fire"))),l.a.createElement(ye.a,{className:"mr-2 ml-2",isOpen:this.state.dropDown2Open,toggle:this.toggleDrop2},l.a.createElement(y.a,{caret:!0},this.state.dropDown2Value),l.a.createElement(_.a,{right:!0},l.a.createElement(C.a,{onClick:e=>this.changeValueDrop2(e,"Today")},"Today"),l.a.createElement(C.a,{onClick:e=>this.changeValueDrop2(e,"Yesterday")},"Yesterday"),l.a.createElement(C.a,{onClick:e=>this.changeValueDrop2(e,"Last Month")},"Last Month"),l.a.createElement(C.a,{onClick:e=>this.changeValueDrop2(e,"All")},"All"))),l.a.createElement(ye.a,{isOpen:this.state.dropDown3Open,toggle:this.toggleDrop3},l.a.createElement(y.a,{caret:!0},this.state.dropDown3Value),l.a.createElement(_.a,{right:!0},l.a.createElement(C.a,{onClick:e=>this.changeValueDrop3(e,"Ascending")},"Ascending"),l.a.createElement(C.a,{onClick:e=>this.changeValueDrop3(e,"Descending")},"Descending"))))))),l.a.createElement(xe.a,{bordered:!0,className:"align-items-center table-dark table-responsive",hover:!0},l.a.createElement("thead",{className:"thead-dark"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col ",style:{textAlign:"center"}},l.a.createElement("div",{align:"center",className:"icon icon-shape bg-transparent text-white rounded-circle"},l.a.createElement("i",{className:"fas fa-calendar-alt"})),l.a.createElement("div",null,l.a.createElement("span",{className:"ml-1"},"Date/Hour"))),l.a.createElement("th",{scope:"col",style:{textAlign:"center"}},l.a.createElement("div",{className:"icon icon-shape bg-transparent text-white rounded-circle"},l.a.createElement("i",{className:"fas fa-map-marked-alt"})),l.a.createElement("div",null,l.a.createElement("span",{className:"ml-1"},"Location"))),l.a.createElement("th",{scope:"col",style:{textAlign:"center"}},l.a.createElement("div",{className:"icon icon-shape bg-transparent text-white rounded-circle"},l.a.createElement("i",{className:"fas fa-building"})),l.a.createElement("div",null,l.a.createElement("span",{className:"ml-1"},"City"))),l.a.createElement("th",{scope:"col",style:{textAlign:"center"}},l.a.createElement("div",{className:"icon icon-shape bg-transparent text-white rounded-circle"},l.a.createElement("i",{className:"fas fa-car"})),l.a.createElement("div",null,l.a.createElement("span",{className:"ml-1"},"N\xba cars"))),l.a.createElement("th",{scope:"col",style:{textAlign:"center"}},l.a.createElement("div",{className:"icon icon-shape bg-transparent text-white rounded-circle"},l.a.createElement("i",{className:"fas fa-users"})),l.a.createElement("div",null,l.a.createElement("span",{className:"ml-1"},"N\xba people"))),l.a.createElement("th",{scope:"col",style:{textAlign:"center"}},l.a.createElement("div",{className:"icon icon-shape bg-transparent text-white rounded-circle"},l.a.createElement("i",{className:"fas fa-user-injured"})),l.a.createElement("div",null,l.a.createElement("span",{className:"ml-1"},"N\xbainjured"))),l.a.createElement("th",{scope:"col",style:{textAlign:"center"}},l.a.createElement("div",{className:"icon icon-shape bg-transparent text-white rounded-circle"},l.a.createElement("i",{className:"fas fa-exclamation-triangle"})),l.a.createElement("div",null,l.a.createElement("span",{className:"ml-1"},"Severity"))),l.a.createElement("th",{scope:"col",style:{textAlign:"center"}},l.a.createElement("div",{className:"icon icon-shape bg-transparent text-white rounded-circle"},l.a.createElement("i",{className:"fas fa-flag"})),l.a.createElement("div",null,l.a.createElement("span",{className:"ml-1"},"Status"))),l.a.createElement("th",{scope:"col",style:{textAlign:"center"}},l.a.createElement("div",{className:"icon icon-shape bg-transparent text-white rounded-circle"},l.a.createElement("i",{className:"fas fa-fire"})),l.a.createElement("div",null,l.a.createElement("span",{className:"ml-1"},"Fire"))),l.a.createElement("th",{scope:"col",style:{textAlign:"center"}}))),l.a.createElement("tbody",null,this.state.table_data.map(this.renderArray))),l.a.createElement(W.a,{className:"bg-transparent border-0"},l.a.createElement(D.a,null,l.a.createElement(A.a,{className:"row justify-content-center"},this.renderButtons()))))))))}}var ke=Ce,Se=t(207),De=t.n(Se),Ae=t(208),Oe=t.n(Ae);class je extends n.Component{constructor(e){super(e),this.els={videoWrapper:null}}render(){return l.a.createElement("div",{className:this.props.wrapperClassName,ref:e=>this.els.videoWrapper=e})}componentDidMount(){this.video=new Oe.a.VideoElement(this.els.videoWrapper,this.props.videoUrl,this.props.options,this.props.overlayOptions),this.props.onRef&&this.props.onRef(this)}play(){this.video.play()}pause(){this.video.pause()}stop(){this.video.stop()}destroy(){this.video.destroy()}}var Me=t(507),Te=t(209),Ve=t.n(Te);t(450);const Le="https://raw.githubusercontent.com/xiaolin/react-image-gallery/master/static/",Ie={poster:"./big_buck_bunny_640x360.jpg"},Fe={};let Pe=null;function Ue(e){let a=e.split("T");return a[0]+" "+a[1].split(".")[0]}class Be extends l.a.Component{constructor(e){var a;super(e),a=this,this.get_data=function(){var e=Object(h.a)(d.a.mark((function e(t){var n,l,s,r,c,o,i,m,h,p,u,g,E;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/list_accidents");case 2:return n=e.sent,e.next=5,n.json();case 5:for(l=e.sent,s=[],r=0;r<l.length;r++)parseInt(l[r].id)!=parseInt(a.props.match.params.id)&&s.push({lat:l[r].location.lat,lng:l[r].location.lng,id:l[r].id,status:4});if(s.push({id:a.props.match.params.id,lat:a.state.accident_data.location.coords.lat,lng:a.state.accident_data.location.coords.lng,status:a.state.accident_data.status}),s.push({id:a.props.match.params.id,lat:a.state.accident_data.location.coords_amb.lat,lng:a.state.accident_data.location.coords_amb.lng,status:3}),void 0!=a.state.surrounding_cars)for(r=0;r<a.state.surrounding_cars.length;r++)s.push({id:a.state.surrounding_cars[r].car_id,lat:parseFloat(a.state.surrounding_cars[r].latitude),lng:parseFloat(a.state.surrounding_cars[r].longitude),id_acc:a.props.match.params.id,status:5});if(void 0!=a.state.surrounding_cameras)for(r=0;r<a.state.surrounding_cameras.length;r++)s.push({id:a.state.surrounding_cameras[r].id,lat:parseFloat(a.state.surrounding_cameras[r].latitude),lng:parseFloat(a.state.surrounding_cameras[r].longitude),id_acc:a.props.match.params.id,status:6});return a.all_locations=s,e.next=15,fetch("/videos/".concat(t));case 15:return e.next=17,e.sent.json();case 17:return c=e.sent,e.next=20,fetch("/markers/".concat(t));case 20:return o=e.sent,e.next=23,o.json();case 23:return i=e.sent,e.next=26,fetch("/CarsMarkers/".concat(t));case 26:return e.next=28,e.sent.json();case 28:return m=e.sent,e.next=31,fetch("/accident/".concat(t));case 31:return o=e.sent,e.next=34,o.json();case 34:return h=e.sent,e.next=37,fetch("/ambulances_by_user");case 37:return o=e.sent,e.next=40,o.json();case 40:return p=e.sent,a.setState(e=>({accident_data:{car:h.cars,location:{address:h.location.address,coords:{lat:h.location.lat,lng:h.location.lng},coords_amb:{lat:parseFloat(i.lat),lng:parseFloat(i.lng)}},damage:h.damage,date:Ue(h.date),n_cars_involved:h.n_cars_involved,n_people_involved:h.n_people,n_people_injured:parseInt(h.n_people_injured),status:h.status},live_ports:c[t],surrounding_cars:m.carData,surrounding_cameras:e.surrounding_cameras,video_total:parseInt(h["video_total,oca"]),dropDownValue:a.init_text_dropdown(parseInt(h.status)),user_ambulances:p})),e.next=44,fetch("/Nmedia/".concat(t,"/photos"));case 44:return u=e.sent,e.next=47,u.json();case 47:if(g=e.sent,a.numImg=parseInt(g),E=[],a.state.video_total>0)for(r=1;r<a.state.video_total+1;r++)E.push({thumbnail:"/media/".concat(t,"/video/").concat(r,"T.jpg"),original:"/media/".concat(t,"/video/").concat(r,"T.jpg"),source:"/media/".concat(t,"/video/").concat(r,".mp4"),renderItem:a._renderVideo.bind(a)});else E.push({thumbnail:"/media/novideo.png",original:"/media/novideo.png"});for(r=0;r<a.numImg;r++)E.push({thumbnail:"/media/".concat(t,"/photos/").concat(r,".jpeg"),original:"/media/".concat(t,"/photos/").concat(r,".jpeg")});a.setState(e=>a.images=E);case 53:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),this.get_cameras=function(){var e=Object(h.a)(d.a.mark((function e(t){var n,l,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.all_locations,e.next=3,fetch("/CameraMarkers/".concat(t));case 3:return e.next=5,e.sent.json();case 5:if(l=e.sent,a.setState(e=>({surrounding_cameras:l.camData})),void 0!=a.state.surrounding_cameras)for(s=0;s<a.state.surrounding_cameras.length;s++)n.push({id:a.state.surrounding_cameras[s].id,lat:parseFloat(a.state.surrounding_cameras[s].latitude),lng:parseFloat(a.state.surrounding_cameras[s].longitude),id_acc:a.props.match.params.id,status:6});a.all_locations=n;case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),this.renderAlertLives=(e,a)=>l.a.createElement(Ve.a,{color:"success",class:"alert"},l.a.createElement("span",{className:"alert-inner--icon"},l.a.createElement("i",{className:"ni ni-like-2"}))," ",l.a.createElement("span",{className:"alert-inner--text"},l.a.createElement("strong",null,"A LIVESTREAM WAS FOUND!"))),this.renderUserAmbs=(e,a)=>{var t="amb"+String(a);return l.a.createElement("option",{value:t},e)},this.renderLivestream=(e,a)=>{let t=String(e.port).split(":")[2]-9e3;return t<1e3?l.a.createElement(G.a,{className:"border rounded"},l.a.createElement(q.a,{tag:"h4",className:"text-uppercase text-muted mb-0"},"Livestream ",a+1),l.a.createElement(G.a,{className:"align-content-center"},l.a.createElement(D.a,null,l.a.createElement("span",{className:"font-weight-bold"},"Car id"),l.a.createElement("span",null,": ",String(t))),l.a.createElement(A.a,{width:"inherit",height:"inherit"},l.a.createElement(z.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(G.a,{className:"border rounded border-info"},l.a.createElement(D.a,null,l.a.createElement("div",{class:"card-body align-items-right"},l.a.createElement(je,{wrapperClassName:"video-wrapper",videoUrl:String(e.port),options:Ie,overlayOptions:Fe,onRef:e=>Pe=e}))),l.a.createElement(D.a,null,l.a.createElement("div",{className:"buttons-wrapper"},l.a.createElement(ne.a,{onClick:()=>Pe.play()},"Play"),l.a.createElement(ne.a,{onClick:()=>Pe.pause()},"Pause"),l.a.createElement(ne.a,{onClick:()=>Pe.stop()},"Stop")))))))):l.a.createElement(G.a,{className:"border rounded"},l.a.createElement(q.a,{tag:"h4",className:"text-uppercase text-muted mb-0"},"Livestream ",a+1),l.a.createElement(G.a,{className:"align-content-center"},l.a.createElement(D.a,null,l.a.createElement("span",{className:"font-weight-bold"},"Camera id"),l.a.createElement("span",null,": ",String(t))),l.a.createElement(A.a,{width:"inherit",height:"inherit"},l.a.createElement(z.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(G.a,{className:"border rounded border-info"},l.a.createElement(D.a,null,l.a.createElement("div",{class:"card-body align-items-right"},l.a.createElement(je,{wrapperClassName:"video-wrapper",videoUrl:String(e.port),options:Ie,overlayOptions:Fe,onRef:e=>Pe=e}))),l.a.createElement(D.a,null,l.a.createElement("div",{className:"buttons-wrapper"},l.a.createElement(ne.a,{onClick:()=>Pe.play()},"Play"),l.a.createElement(ne.a,{onClick:()=>Pe.pause()},"Pause"),l.a.createElement(ne.a,{onClick:()=>Pe.stop()},"Stop"))))))))},this.renderCars=(e,a)=>l.a.createElement(G.a,{className:"border rounded"},l.a.createElement(q.a,{tag:"h4",className:"text-uppercase text-muted mb-0"},"Car ",a+1),l.a.createElement(G.a,{className:"align-content-center"},l.a.createElement(D.a,null,l.a.createElement("span",{className:"font-weight-bold"},"Activated ABS"),l.a.createElement("span",null,": ",String(e.ABS))),l.a.createElement(D.a,null,l.a.createElement("span",{className:"font-weight-bold"},"Fired Airbag"),l.a.createElement("span",null,": ",String(e.airbag))),l.a.createElement(D.a,null,l.a.createElement("span",{className:"font-weight-bold"},"Passengers"),l.a.createElement("span",null,": ",e.n_people," ")),l.a.createElement(D.a,null,l.a.createElement("span",{className:"font-weight-bold"},"Overturned"),l.a.createElement("span",null,": ",String(e.overturned))),l.a.createElement(D.a,null,l.a.createElement("span",{className:"font-weight-bold"},"Temperature"),l.a.createElement("span",null,": ",e.temperature)),l.a.createElement(D.a,null,l.a.createElement("span",{className:"font-weight-bold"},"Collision velocity"),l.a.createElement("span",null,": ",e.velocity)))),this.onGoBack=()=>l.a.createElement(o.a,{to:"/admin/accidents"}),this.handleClick=(e,a,t)=>{e.preventDefault();let n=this.state.accident_data.n_people_injured+t;n>=0&&(this.setState(()=>this.state.accident_data.n_people_injured=n),this.set_injured(a,n))},this.getSelectValue=Object(h.a)(d.a.mark((function e(){var t,n,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("ambs"),n=t.options[t.selectedIndex].text,e.next=4,a.myChangeHandler(n);case 4:a.updateDBToSelectedStatus("Emergency services are on their way"),l=a.props.match.params.id,fetch("/markers/".concat(l),{method:"POST",cache:"no-cache",headers:{"content-type":"application/json"},body:JSON.stringify({ambulance:a.state.ambulance})}).then(e=>e.json()).then(e=>{a.setState({ambulance:e[0]})});case 7:case"end":return e.stop()}}),e)}))),this.mySubmitHandler=(e,a)=>{e.preventDefault(),alert("You are submitting "+this.state.ambulance),this.updateDBToSelectedStatus("Emergency services are on their way"),fetch("/markers/".concat(a),{method:"POST",cache:"no-cache",headers:{"content-type":"application/json"},body:JSON.stringify({ambulance:this.state.ambulance})}).then(e=>e.json()).then(e=>{this.setState({ambulance:e[0]})})},this.myChangeHandler=e=>{this.setState({ambulance:e})},this.timer=null,this.toggle=this.toggle.bind(this),this.changeValue=this.changeValue.bind(this),this.all_locations=[],this.state={ambulance:0,user_ambulances:[],showIndex:!1,showBullets:!0,infinite:!0,showThumbnails:!0,showFullscreenButton:!0,showGalleryFullscreenButton:!0,showPlayButton:!1,showGalleryPlayButton:!1,showNav:!0,isRTL:!1,slideDuration:5,slideInterval:2e3,slideOnThumbnailOver:!1,thumbnailPosition:"left",showVideo:{},video_total:0,photos_total:0,accident_data:{car:[],location:{address:" ",coords:{lat:40,lng:30},coords_amb:{lat:40,lng:30}},damage:0,date:" ",n_cars_involved:0,n_people_involved:0,n_people_injured:0},live_ports:[],dropDownValue:0,dropDownOpen:!1},this.numImg=0,this.images=[{thumbnail:"",original:"",source:"",renderItem:this._renderVideo.bind(this)},{original:"",thumbnail:"",imageSet:[{srcSet:"".concat(Le,"image_set_cropped.jpg"),media:"(max-width: 1280px)"},{srcSet:"".concat(Le,"image_set_default.jpg"),media:"(min-width: 1280px)"}]},{original:"".concat(Le,"1.jpg"),thumbnail:"".concat(Le,"1t.jpg"),originalClass:"featured-slide",thumbnailClass:"featured-thumb"}]}componentDidMount(){let e=this.props.match.params.id;this.get_data(e),this.get_cameras(e),this.timer=setInterval(()=>this.get_data(e),1e3)}componentDidUpdate(e,a){this.state.slideInterval===a.slideInterval&&this.state.slideDuration===a.slideDuration||(this._imageGallery.pause(),this._imageGallery.play())}componentWillUnmount(){clearInterval(this.timer),this.timer=null}_onImageClick(e){console.debug("clicked on image",e.target,"at index",this._imageGallery.getCurrentIndex())}_onImageLoad(e){console.debug("loaded image",e.target.src)}_onSlide(e){this._resetVideo(),console.debug("slid to index",e)}_onPause(e){console.debug("paused on index",e)}_onScreenChange(e){console.debug("isFullScreen?",!!e)}_onPlay(e){console.debug("playing from index",e)}_resetVideo(){this.setState({showVideo:{}}),this.state.showPlayButton&&this.setState({showGalleryPlayButton:!0}),this.state.showFullscreenButton&&this.setState({showGalleryFullscreenButton:!0})}_toggleShowVideo(e){this.state.showVideo[e]=!Boolean(this.state.showVideo[e]),this.setState({showVideo:this.state.showVideo}),this.state.showVideo[e]&&(this.state.showPlayButton&&this.setState({showGalleryPlayButton:!1}),this.state.showFullscreenButton&&this.setState({showGalleryFullscreenButton:!1}))}_renderVideo(e){return l.a.createElement("div",null,this.state.showVideo[e.source]?l.a.createElement("div",{className:"video-wrapper"},l.a.createElement("a",{className:"close-video",onClick:this._toggleShowVideo.bind(this,e.source)}),l.a.createElement("video",{autoPlay:!0,controls:!0},"// width='100%' // height='100%'",l.a.createElement("source",{src:e.source,type:"video/mp4"}),"// frameBorder='0' // allowFullScreen")):l.a.createElement("a",{onClick:this._toggleShowVideo.bind(this,e.source)},l.a.createElement("div",{className:"play-button"}),l.a.createElement("img",{className:"image-gallery-image",src:e.original}),e.description&&l.a.createElement("span",{className:"image-gallery-description",style:{right:"0",left:"initial",height:"100%"}},e.description)))}toggle(){this.setState({dropDownOpen:!this.state.dropDownOpen})}changeValue(e){this.updateDBToSelectedStatus(e.currentTarget.textContent),this.setState({dropDownValue:e.currentTarget.textContent})}getBarColor(e){return e<30?"h2 font-weight-bold mb-0 text-success":e<45?"h2 font-weight-bold mb-0 text-teal":e<75?"h2 font-weight-bold mb-0 text-orange":"h2 font-weight-bold mb-0 text-red"}setStatusColor(){return"Accident resolved"===this.state.dropDownValue?l.a.createElement(ve.a,{color:"",className:"badge-dot badge-lg"},l.a.createElement("i",{className:"bg-lime"})):"Emergency services are on their way"===this.state.dropDownValue?l.a.createElement(ve.a,{color:"",className:"badge-dot badge-lg"},l.a.createElement("i",{className:"bg-yellow"})):l.a.createElement(ve.a,{color:"",className:"badge-dot badge-lg"},l.a.createElement("i",{className:"bg-red"}))}init_text_dropdown(e){return 2===e?"Accident resolved":1===e?"Emergency services are on their way":"Accident still not answered"}updateDBToSelectedStatus(e){"Accident resolved"===e&&fetch("/set_accident_status/".concat(this.props.match.params.id),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:2})}),"Emergency services are on their way"===e?fetch("/set_accident_status/".concat(this.props.match.params.id),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:1})}):fetch("/set_accident_status/".concat(this.props.match.params.id),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:0})})}set_injured(e,a){fetch("/set_accident_injured/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({injured:"".concat(a)})})}render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(ee,null),l.a.createElement(i.a,{className:" mt--7",fluid:!0},l.a.createElement(D.a,null,l.a.createElement(A.a,{className:" col"},l.a.createElement(z.a,{className:" shadow"},l.a.createElement(W.a,{className:" bg-transparent"},l.a.createElement(D.a,null,l.a.createElement(A.a,null,l.a.createElement("div",{className:"d-flex"},l.a.createElement(ne.a,{className:"icon icon-shape bg-info text-white rounded-circle shadow",href:"/#admin/accidents",onClick:this.onGoBack()},l.a.createElement("i",{className:"fas fa-angle-left"})),l.a.createElement("h2",{className:" mt-2 ml-4 "},"Accident Details"))),l.a.createElement(A.a,null,l.a.createElement("div",{className:"row justify-content-end"},l.a.createElement("div",{className:"mr-2"},this.setStatusColor()),l.a.createElement("div",{className:"mr-2 "},l.a.createElement(ye.a,{className:"dropdown-width",isOpen:this.state.dropDownOpen,toggle:this.toggle},l.a.createElement(y.a,{caret:!0},this.state.dropDownValue),l.a.createElement(_.a,{right:!0},l.a.createElement(C.a,{onClick:this.changeValue},"Accident still not answered"),l.a.createElement(C.a,{onClick:this.changeValue},"Emergency services are on their way"),l.a.createElement(C.a,{onClick:this.changeValue},"Accident resolved")))))))),l.a.createElement(G.a,null,l.a.createElement(D.a,{className:"h-75 "},l.a.createElement(A.a,null,l.a.createElement(D.a,null,l.a.createElement("div",{className:"col"},l.a.createElement("img",{src:t(464),style:{height:"100%",width:"100%"}}))),l.a.createElement(D.a,null,l.a.createElement("div",{className:"col"},l.a.createElement("p",null,l.a.createElement("strong",null,"Address:")," ",this.state.accident_data.location.address))),l.a.createElement(D.a,null,l.a.createElement("div",{className:"col-sm"},l.a.createElement("p",null,l.a.createElement("strong",null,"Lat:")," ",this.state.accident_data.location.coords.lat)),l.a.createElement("div",{className:"col-sm"},l.a.createElement("p",null,l.a.createElement("strong",null,"Lng:")," ",this.state.accident_data.location.coords.lng)))),l.a.createElement(A.a,null,l.a.createElement(G.a,null,l.a.createElement(De.a,{ref:e=>this._imageGallery=e,items:this.images,lazyLoad:!1,onClick:this._onImageClick.bind(this),onImageLoad:this._onImageLoad,onSlide:this._onSlide.bind(this),onPause:this._onPause.bind(this),onScreenChange:this._onScreenChange.bind(this),onPlay:this._onPlay.bind(this),infinite:this.state.infinite,showBullets:this.state.showBullets,showFullscreenButton:this.state.showFullscreenButton&&this.state.showGalleryFullscreenButton,showPlayButton:this.state.showPlayButton&&this.state.showGalleryPlayButton,showThumbnails:this.state.showThumbnails,showIndex:this.state.showIndex,showNav:this.state.showNav,isRTL:this.state.isRTL,thumbnailPosition:this.state.thumbnailPosition,slideDuration:parseInt(this.state.slideDuration),slideInterval:parseInt(this.state.slideInterval),slideOnThumbnailOver:this.state.slideOnThumbnailOver,additionalClass:"app-image-gallery"})))),l.a.createElement(ue,{markers:this.all_locations,origem:this.state.accident_data.location.coords,destino:this.state.accident_data.location.coords_amb,googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyA03XhgCxn-V9TsghBLpQ8LaScQLPgIJxs",loadingElement:l.a.createElement("div",{style:{height:"100%"}}),center:this.state.accident_data.location.coords,zoom:17,containerElement:l.a.createElement("div",{className:"map-canvas",id:"map-canvas"}),mapElement:l.a.createElement("div",{style:{height:"100%",borderRadius:"inherit"}})}),l.a.createElement(W.a,null,l.a.createElement("h3",null," ")),this.state.live_ports.map(this.renderAlertLives),l.a.createElement(D.a,null,l.a.createElement(A.a,{lg:"6",xl:"3"},l.a.createElement(z.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(G.a,{className:"border rounded border-info"},l.a.createElement(D.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(q.a,{tag:"h5",className:"text-uppercase text-muted mb-0"},"Number of cars involved"),l.a.createElement("span",{className:"h2 font-weight-bold mb-0"},this.state.accident_data.n_cars_involved)),l.a.createElement(A.a,{className:"col-auto"},l.a.createElement(ne.a,{className:"icon icon-shape bg-success text-dark rounded-circle shadow",id:"toggler"},l.a.createElement("i",{className:"fas fa-car"}))))))),l.a.createElement(A.a,{lg:"6",xl:"3"},l.a.createElement(z.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(G.a,{className:"border rounded border-info"},l.a.createElement(D.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(q.a,{tag:"h5",className:"text-uppercase text-muted mb-0"},"Number of persons involved"),l.a.createElement("span",{className:"h2 font-weight-bold mb-0"},this.state.accident_data.n_people_involved)),l.a.createElement(A.a,{className:"col-auto"},l.a.createElement("div",{className:"icon icon-shape bg-info text-dark rounded-circle shadow"},l.a.createElement("i",{className:"fas fa-users"}))))))),l.a.createElement(A.a,{lg:"6",xl:"3"},l.a.createElement(z.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(G.a,{className:"border rounded border-info"},l.a.createElement(D.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(q.a,{tag:"h5",className:"text-uppercase text-muted mb-0"},"Number of persons injured"),l.a.createElement("span",{className:"h2 font-weight-bold mb-0"},l.a.createElement(ne.a,{className:" icon-sm icon-shapesm bg-warning text-dark shadow",onClick:e=>this.handleClick(e,this.props.match.params.id,-1)},l.a.createElement("i",{className:"fas fa-minus"})),this.state.accident_data.n_people_injured,l.a.createElement(ne.a,{className:" icon-sm icon-shapesm bg-success text-dark shadow",onClick:e=>this.handleClick(e,this.props.match.params.id,1)},l.a.createElement("i",{className:"fas fa-plus"})))),l.a.createElement(A.a,{className:"col-auto"},l.a.createElement("div",{className:"icon icon-shape bg-danger text-dark rounded-circle shadow"},l.a.createElement("i",{className:"fas fa-user-injured"}))))))),l.a.createElement(A.a,{lg:"6",xl:"3"},l.a.createElement(z.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(G.a,{className:"border rounded border-info"},l.a.createElement(D.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(q.a,{tag:"h5",className:"text-uppercase text-muted mb-0"},"Severity of the accident"),l.a.createElement("span",{className:this.getBarColor(this.state.accident_data.damage)},this.state.accident_data.damage)),l.a.createElement(A.a,{className:"col-auto"},l.a.createElement("div",{className:"icon icon-shape bg-yellow text-dark rounded-circle shadow"},l.a.createElement("i",{className:"fas fa-exclamation-triangle"}))))))),l.a.createElement(A.a,{lg:"6",xl:"3"},l.a.createElement(z.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(G.a,{className:"border rounded border-info"},l.a.createElement(D.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(q.a,{tag:"h5",className:"text-uppercase text-muted mb-0"},"Livestreams"),l.a.createElement("span",{className:"h2 font-weight-bold mb-0"},this.state.live_ports.length)),l.a.createElement(A.a,{className:"col-auto"},l.a.createElement(ne.a,{className:"icon icon-shape bg-success text-dark rounded-circle shadow",id:"togglerLives"},l.a.createElement("i",{className:"fas fa-video"}))))))),l.a.createElement(A.a,{lg:"6",xl:"3"},l.a.createElement(z.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(G.a,{className:"border rounded border-info"},l.a.createElement(D.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(q.a,{tag:"h5",className:"text-uppercase text-muted mb-0"},"Choose an Ambulance")),l.a.createElement(A.a,{className:"col-auto"},l.a.createElement("select",{name:"ambs",id:"ambs",onChange:this.getSelectValue,class:"btn btn-secondary dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},l.a.createElement("option",{value:"amb0"},"0"),this.state.user_ambulances.map(this.renderUserAmbs)))))))),l.a.createElement(Me.a,{toggler:"#toggler"},l.a.createElement(z.a,null,l.a.createElement(G.a,null,l.a.createElement(D.a,null,this.state.accident_data.car.map(this.renderCars))))),l.a.createElement(Me.a,{toggler:"#togglerLives"},l.a.createElement(z.a,null,l.a.createElement(G.a,null,l.a.createElement(D.a,null,this.state.live_ports.map(this.renderLivestream)))))))))))}}var Re=Be;class Je extends l.a.Component{constructor(e){var a;super(e),a=this,this.getData=Object(h.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/home");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,a.setState(e=>({Username:n.Username,email:n.email,about:n.about,address:n.address,birth_date:n.birth_date,country:n.country,city:n.city,first_name:n.first_name,last_name:n.last_name,postal_code:n.postal_code,profession:n.profession,telephone:n.telephone,work_institution:n.work_institution})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a.setState(e=>({error:"No accidents do Show"}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),this.onSaveChanges=()=>{fetch("/update_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Username:this.state.Username,last_email:this.state.email,about:this.state.about,address:this.state.address,birth_date:this.state.birth_date,country:this.state.country,first_name:this.state.first_name,last_name:this.state.last_name,postal_code:this.state.postal_code,profession:this.state.profession,telephone:this.state.telephone,work_institution:this.state.work_institution})}).then(e=>e.json()).then(e=>{"Done"==e.response?this.props.history.push("/admin"):this.setState({error:e.error})},e=>{this.setState({isLoaded:!0,error:"error"})})},this.state={user:[],Username:"",about:"",address:"",birth_date:"",city:"",country:"",email:"",first_name:"",last_name:"",postal_code:"",profession:"",telephone:"",work_institution:""},this.handleChange=this.handleChange.bind(this)}componentDidMount(){this.getData()}handleChange(e){const a=e.target,t=a.value,n=a.name;this.setState({[n]:t})}render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(se,null),l.a.createElement(i.a,{className:"mt--7",fluid:!0},l.a.createElement(D.a,null,l.a.createElement(A.a,null,l.a.createElement(z.a,{className:"bg-secondary shadow"},l.a.createElement(W.a,{className:"bg-white border-0"},l.a.createElement(D.a,{className:"align-items-center"},l.a.createElement(A.a,{xs:"8"},l.a.createElement("h3",{className:"mb-0"},"My account")))),l.a.createElement(G.a,null,l.a.createElement(u.a,null,l.a.createElement("h6",{className:"heading-small text-muted mb-4"},"User information"),l.a.createElement("div",{className:"pl-lg-4"},l.a.createElement(D.a,null,l.a.createElement(A.a,{lg:"6"},l.a.createElement(g.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-username"},"Username"),l.a.createElement(N.a,{className:"form-control-alternative",id:"input-username",placeholder:this.state.Username,type:"text",name:"Username",value:this.state.Username,onChange:this.handleChange}))),l.a.createElement(A.a,{lg:"6"},l.a.createElement(g.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-email"},"Email address"),l.a.createElement(N.a,{className:"form-control-alternative",id:"input-email",name:"email",placeholder:this.state.email,type:"email",disabled:!0})))),l.a.createElement(D.a,null,l.a.createElement(A.a,{lg:"4"},l.a.createElement(g.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-first-name"},"First name"),l.a.createElement(N.a,{className:"form-control-alternative",id:"input-first-name",placeholder:this.state.first_name,type:"text",name:"first_name",value:this.state.first_name,onChange:this.handleChange}))),l.a.createElement(A.a,{lg:"4"},l.a.createElement(g.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-last-name"},"Last name"),l.a.createElement(N.a,{className:"form-control-alternative",id:"input-last-name",placeholder:this.state.last_name,type:"text",name:"last_name",value:this.state.last_name,onChange:this.handleChange}))),l.a.createElement(A.a,{lg:"4"},l.a.createElement(g.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"dateofbirth"},"Birth Date"),l.a.createElement(N.a,{className:"form-control-alternative",id:"dateofbirth",type:"date",name:"birth_date",value:this.state.birth_date,onChange:this.handleChange}))))),l.a.createElement("hr",{className:"my-4"}),l.a.createElement("h6",{className:"heading-small text-muted mb-4"},"Contact information"),l.a.createElement("div",{className:"pl-lg-4"},l.a.createElement(D.a,null,l.a.createElement(A.a,{md:"12"},l.a.createElement(g.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-address"},"Address"),l.a.createElement(N.a,{className:"form-control-alternative",id:"input-address",placeholder:this.state.address,type:"text",name:"address",value:this.state.address,onChange:this.handleChange})))),l.a.createElement(D.a,null,l.a.createElement(A.a,{lg:"4"},l.a.createElement(g.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-city"},"City"),l.a.createElement(N.a,{className:"form-control-alternative",id:"input-city",name:"city",placeholder:this.state.city,type:"text",disabled:!0}))),l.a.createElement(A.a,{lg:"4"},l.a.createElement(g.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-country"},"Country"),l.a.createElement(N.a,{className:"form-control-alternative",defaultValue:"Portugal",id:"input-country",placeholder:this.state.country,type:"text",name:"country",value:this.state.country,onChange:this.handleChange}))),l.a.createElement(A.a,{lg:"4"},l.a.createElement(g.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-country"},"Postal code"),l.a.createElement(N.a,{className:"form-control-alternative",id:"input-postal-code",placeholder:"Postal code",type:this.state.postal_code,value:this.state.postal_code,name:"postal_code",onChange:this.handleChange})))),l.a.createElement(D.a,null,l.a.createElement(A.a,{lg:"4"},l.a.createElement(g.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-country"},"Telephone"),l.a.createElement(N.a,{className:"form-control-alternative",id:"input-postal-code",placeholder:this.state.telephone,value:this.state.telephone,onChange:this.handleChange,name:"telephone",type:"number"}))))),l.a.createElement("hr",{className:"my-4"}),l.a.createElement("h6",{className:"heading-small text-muted mb-4"},"Institution"),l.a.createElement("div",{className:"pl-lg-4"},l.a.createElement(D.a,null,l.a.createElement(A.a,{lg:"6"},l.a.createElement(g.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-username"},"Work Institution"),l.a.createElement(N.a,{className:"form-control-alternative",id:"input-username",placeholder:this.state.work_institution,value:this.state.work_institution,onChange:this.handleChange,name:"work_institution",type:"text"}))),l.a.createElement(A.a,{lg:"6"},l.a.createElement(g.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-email"},"Profession"),l.a.createElement(N.a,{className:"form-control-alternative",id:"input-email",placeholder:this.state.profession,value:this.state.profession,onChange:this.handleChange,type:"email",name:"profession"}))))),l.a.createElement("hr",{className:"my-4"}),l.a.createElement("h6",{className:"heading-small text-muted mb-4"},"About me"),l.a.createElement("div",{className:"pl-lg-4"},l.a.createElement(g.a,null,l.a.createElement("label",null,"About Me"),l.a.createElement(N.a,{className:"form-control-alternative",placeholder:"A few words about you ...",rows:"4",defaultValue:this.state.about,value:this.state.about,onChange:this.handleChange,type:"textarea",name:"about"}))),l.a.createElement("div",{className:"pl-lg-4"},l.a.createElement(D.a,{className:"justify-content-center"},l.a.createElement(ne.a,{color:"info",href:"/#admin/user-profile",onClick:this.onSaveChanges},"Save Changes"))))))))))}}var ze=Je;class We extends l.a.Component{constructor(e){var a;super(e),a=this,this.getData=Object(h.a)(d.a.mark((function e(){var t,n,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/all_users");case 3:return t=e.sent,e.next=6,t.json();case 6:if(0===(n=e.sent).length)a.setState(e=>({error:"No users to Show"}));else if(0==a.state.edit_mode.length)for(l=0;l<n.length;l++)a.state.edit_mode.push(!1);a.setState(e=>({table_data:n,table_data_original:JSON.parse(JSON.stringify(n)),error:!1})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),a.setState(e=>({error:"No users to Show"}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),this.renderArray=(e,a)=>this.state.edit_mode[parseInt(a)]?l.a.createElement("tr",{key:a},l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement("span",{className:"mb-0 text-sm"},e.id)),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement("span",{className:"mb-0 text-sm"},l.a.createElement(N.a,{className:"form-control-alternative",id:"Username",placeholder:e.Username,type:"text",name:"Username",value:e.Username,onChange:e=>this.handleChange2(e,a)}))),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement("span",{className:"mb-0 text-sm"},l.a.createElement(N.a,{className:"form-control-alternative",id:"email",placeholder:e.email,type:"text",name:"email",value:e.email,onChange:e=>this.handleChange2(e,a)}))),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement("span",{className:"mb-0 text-sm"},l.a.createElement(N.a,{className:"form-control-alternative",id:"city",placeholder:e.city,type:"text",name:"city",value:e.city,onChange:e=>this.handleChange2(e,a)}))),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement("span",{className:"mb-0 text-sm"},l.a.createElement(N.a,{className:"form-control-alternative",id:"role",placeholder:e.role,type:"text",name:"role",value:e.role,onChange:e=>this.handleChange2(e,a)}))),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement("span",{className:"mb-0 text-sm"},l.a.createElement(N.a,{className:"form-control-alternative",id:"input-username",placeholder:e.role_type,type:"text",name:"role_type",value:e.role_type,onChange:e=>this.handleChange2(e,a)}))),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement("span",{className:"mb-0 text-sm"},e.last_login)),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},this.state.edit_mode[a]&&l.a.createElement(ne.a,{className:"icon icon-shape bg-success text-white rounded-circle",type:"button",onClick:e=>this.changeUserInfo(e,a)},l.a.createElement("i",{className:"fas fa-check"})),this.state.edit_mode[a]&&l.a.createElement(ne.a,{className:"icon icon-shape bg-warning text-white rounded-circle",type:"button",onClick:e=>this.setEditMode(a,!1)},l.a.createElement("i",{className:"fas fa-times"})),l.a.createElement(ne.a,{className:"icon icon-shape bg-danger text-white rounded-circle",type:"button",onClick:a=>this.handleDelete(e.email)},l.a.createElement("i",{className:"fas fa-trash"})))):l.a.createElement("tr",{key:a},l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement("span",{className:"mb-0 text-sm"},e.id)),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement("span",{className:"mb-0 text-sm"},e.Username)),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement("span",{className:"mb-0 text-sm"},e.email)),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement("span",{className:"mb-0 text-sm"},e.city)),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement("span",{className:"mb-0 text-sm"},e.role)),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement("span",{className:"mb-0 text-sm"},e.role_type)),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement("span",{className:"mb-0 text-sm"},e.last_login)),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},this.state.edit_mode[a]&&l.a.createElement(ne.a,{className:"icon icon-shape bg-success text-white rounded-circle",type:"button",onClick:e=>this.setEditMode(a,!1)},l.a.createElement("i",{className:"fas fa-check"})),this.state.edit_mode[a]&&l.a.createElement(ne.a,{className:"icon icon-shape bg-warning text-white rounded-circle",type:"button",onClick:e=>this.setEditMode(a,!1)},l.a.createElement("i",{className:"fas fa-times"})),l.a.createElement(ne.a,{className:"icon icon-shape bg-yellow text-white rounded-circle",type:"button",onClick:e=>this.setEditMode(a,!0)},l.a.createElement("i",{className:"fas fa-pencil-alt"})),l.a.createElement(ne.a,{className:"icon icon-shape bg-danger text-white rounded-circle",type:"button",onClick:a=>this.handleDelete(e.email)},l.a.createElement("i",{className:"fas fa-trash"})))),this.handleClick=(e,a)=>{e.preventDefault(),this.state.curent_page=a,this.getData()},this.timer=null,this.toggleDrop1=this.toggleDrop1.bind(this),this.changeValueDrop1=this.changeValueDrop1.bind(this),this.setEditMode=this.setEditMode.bind(this),this.NewUser=this.NewUser.bind(this),this.handleChange=this.handleChange.bind(this),this.handleChange2=this.handleChange2.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.state={table_data:[],table_data_original:[],table_buttons:[],curent_page:1,num_accidents:0,num_to_show:10,dropDown1Value:"Date/Hour",dropdownIndex:"between",dropDown1Open:!1,error:!1,edit_mode:[],addUser:!1,new_email:"",new_role:"",new_roleType:"",new_city:""}}handleChange(e){const a=e.target,t=a.value,n=a.name;this.setState({[n]:t})}handleChange2(e,a){const t=e.target,n=t.value,l=t.name;this.state.table_data[a][l]=n,this.setState({})}handleSubmit(e){e.preventDefault(),fetch("/add_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.state.new_email,role:this.state.new_role,role_type:this.state.new_roleType,city:this.state.new_city})}).then(e=>e.json()).then(e=>{"Done"==e.response?(this.setState({addUser:!1,new_email:"",new_role:"",new_roleType:"",new_city:""}),this.getData()):this.setState({error:e.error})},e=>{this.setState({isLoaded:!0,error:"error"})})}handleDelete(e){fetch("/delete_user/"+e,{method:"POST"}).then(e=>e.json()).then(e=>{this.getData()})}renderButtons(){if(this.state.num_accidents>this.state.num_to_show){const e=[];this.state.curent_page>1&&e.push(l.a.createElement("li",{className:"page-item"},l.a.createElement("a",{className:"page-link",onClick:e=>this.handleClick(e,this.state.curent_page-1)},l.a.createElement("i",{className:"fas fa-angle-left"}))));for(let a=1;a<Math.ceil(this.state.num_accidents/this.state.num_to_show)+1;a++)a==this.state.curent_page?e.push(l.a.createElement("li",{className:"page-item active"},l.a.createElement("a",{className:"page-link",onClick:e=>this.handleClick(e,"".concat(a))},a))):e.push(l.a.createElement("li",{className:"page-item"},l.a.createElement("a",{className:"page-link",onClick:e=>this.handleClick(e,"".concat(a))},a)));return this.state.curent_page<Math.ceil(this.state.num_accidents/this.state.num_to_show)&&e.push(l.a.createElement("li",{className:"page-item"},l.a.createElement("a",{className:"page-link",onClick:e=>this.handleClick(e,parseInt(this.state.curent_page)+1)},l.a.createElement("i",{className:"fas fa-angle-right"})))),l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("nav",{"aria-label":"Page navigation example"},l.a.createElement("ul",{className:"pagination"},e)))}}componentDidMount(){this.getData()}componentWillUnmount(){clearInterval(this.timer),this.timer=null}toggleDrop1(){this.setState({dropDown1Open:!this.state.dropDown1Open})}changeValueDrop1(e,a){this.state.dropDown1Value=e.currentTarget.textContent,this.state.dropdownIndex="".concat(["","between","cars","people","injured","severity","status"][a]),this.getData(a)}setEditMode(e,a){0==a&&(this.state.table_data[parseInt(e)]=JSON.parse(JSON.stringify(this.state.table_data_original[parseInt(e)]))),this.state.edit_mode[parseInt(e)]=a,this.setState(e=>({}))}changeUserInfo(e,a){this.state.edit_mode[parseInt(a)]=!1,fetch("/update_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Username:this.state.table_data[a].Username,email:this.state.table_data[a].email,role:this.state.table_data[a].role,role_type:this.state.table_data[a].role_type,city:this.state.table_data[a].city,last_email:this.state.table_data_original[a].email})}).then(e=>e.json()).then(e=>{this.getData()})}NewUser(){this.setState(e=>({addUser:!this.state.addUser}))}render(){return this.state.error?l.a.createElement(l.a.Fragment,null,l.a.createElement(ee,null),l.a.createElement(i.a,{className:"mt--7",fluid:!0},l.a.createElement(D.a,{className:"mt-5"},l.a.createElement("div",{className:"col"},l.a.createElement(z.a,{className:"shadow"},l.a.createElement(W.a,{className:"bg-transparent border-0"},l.a.createElement(D.a,null,l.a.createElement(A.a,null,l.a.createElement("div",{className:"row ml"},l.a.createElement("h1",{className:"mb-0",style:{paddingLeft:20}},"Users"))))),l.a.createElement("h1",{className:"text-danger mb-0",style:{textAlign:"center"}}," ",this.state.error),l.a.createElement("br",null)))))):l.a.createElement(l.a.Fragment,null,l.a.createElement(ee,null),l.a.createElement(i.a,{className:"mt--7",fluid:!0},l.a.createElement(D.a,{className:"mt-5"},l.a.createElement("div",{className:"col"},l.a.createElement(z.a,{className:"shadow"},l.a.createElement(W.a,{className:"bg-transparent border-0"},l.a.createElement(D.a,null,l.a.createElement(A.a,null,l.a.createElement("div",{className:"row ml"},l.a.createElement("h1",{className:"mb-0",style:{paddingLeft:20,paddingRight:20}},"Users"),l.a.createElement(ne.a,{className:"icon icon-shape bg-green text-white rounded-circle",type:"button",onClick:e=>this.NewUser()},l.a.createElement("i",{className:"fas fa-plus"})))),l.a.createElement(A.a,null,this.renderButtons()))),l.a.createElement(xe.a,{bordered:!0,className:"align-items-center table-flush",hover:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col ",style:{textAlign:"center"}},"ID"),l.a.createElement("th",{scope:"col",style:{textAlign:"center"}},"Username"),l.a.createElement("th",{scope:"col",style:{textAlign:"center"}},"Email"),l.a.createElement("th",{scope:"col",style:{textAlign:"center"}},"City"),l.a.createElement("th",{scope:"col",style:{textAlign:"center"}},"Role"),l.a.createElement("th",{scope:"col",style:{textAlign:"center"}},"Role ID"),l.a.createElement("th",{scope:"col",style:{textAlign:"center"}},"Last Login"),l.a.createElement("th",{scope:"col",style:{textAlign:"center"}}))),l.a.createElement("tbody",null,this.state.addUser&&l.a.createElement("tr",null,l.a.createElement("th",{scope:"row",style:{textAlign:"center"}}),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}}),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement(N.a,{placeholder:"email",type:"email",name:"new_email",value:this.state.new_email,onChange:this.handleChange,autoComplete:"new-password"})),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement(N.a,{placeholder:"City",type:"email",name:"new_city",value:this.state.new_city,onChange:this.handleChange,autoComplete:"new-password"})),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement(N.a,{placeholder:"Role",type:"email",name:"new_role",value:this.state.new_role,onChange:this.handleChange,autoComplete:"new-password"})),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement(N.a,{placeholder:"Role ID",type:"email",name:"new_roleType",value:this.state.new_roleType,onChange:this.handleChange,autoComplete:"new-password"})),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}}),l.a.createElement("th",{scope:"row",style:{textAlign:"center"}},l.a.createElement(ne.a,{className:"icon icon-shape bg-warning text-white rounded-circle",type:"button",onClick:e=>this.NewUser()},l.a.createElement("i",{className:"fas fa-times"})),l.a.createElement(ne.a,{className:"icon icon-shape bg-green text-white rounded-circle",type:"button",onClick:this.handleSubmit},l.a.createElement("i",{className:"fas fa-arrow-right"})))),this.state.table_data.map(this.renderArray))),l.a.createElement(W.a,{className:"bg-transparent border-0"},l.a.createElement(D.a,null,l.a.createElement(A.a,{className:"row justify-content-center"},this.renderButtons()))))))))}}var Ge=We;t(465),t(466),t(195);n.Component;const He=new WebSocket("ws://127.0.0.1:5000");let qe,Qe;He.onmessage=e=>{!function(e){switch(e.type){case"offer":qe.setRemoteDescription(e.offer),qe.createAnswer(e=>{qe.setLocalDescription(e),Ye({type:"send_answer",answer:e})},e=>{console.log(e)});break;case"candidate":qe.addIceCandidate(e.candidate)}}(JSON.parse(e.data))};function Ye(e){e.username=Qe,He.send(JSON.stringify(e))}n.Component;var Xe=[{path:"/index",name:"Dashboard",icon:"ni ni-tv-2 text-primary",component:te,layout:"/admin"},{path:"/accident_details/:id",name:"Accident Details",icon:"ni ni-planet text-blue",component:Re,layout:"/admin"},{path:"/maps",name:"Maps",icon:"ni ni-pin-3 text-orange",component:ge,layout:"/admin"},{path:"/user-profile",name:"User Profile",icon:"ni ni-single-02 text-yellow",component:ce,layout:"/admin"},{path:"/accidents",name:"Accidents",icon:"ni ni-ambulance text-purple",component:ke,layout:"/admin"},{path:"/login",name:"Login",icon:"ni ni-key-25 text-info",component:Ne,layout:"/auth"},{path:"/register",name:"Register",icon:"ni ni-circle-08 text-pink",component:be,layout:"/auth"},{path:"/edit_profile",name:"Edit Profile",icon:"ni ni-single-02 text-yellow",component:ze,layout:"/admin"},{path:"/users_table",name:"Users Table",icon:"ni ni-single-02 text-yellow",component:Ge,layout:"/admin"}];class Ze extends l.a.Component{constructor(...e){super(...e),this.getRoutes=e=>e.map((e,a)=>"/admin"===e.layout?l.a.createElement(o.b,{path:e.layout+e.path,component:e.component,key:a}):null),this.getBrandText=e=>{for(let a=0;a<Xe.length;a++)if(-1!==this.props.location.pathname.indexOf(Xe[a].layout+Xe[a].path))return Xe[a].name;return"Brand"}}componentDidUpdate(e){document.documentElement.scrollTop=0,document.scrollingElement.scrollTop=0,this.refs.mainContent.scrollTop=0}render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(F,Object.assign({},this.props,{routes:Xe,logo:{innerLink:"/admin/index",imgSrc:t(196),imgAlt:"..."}})),l.a.createElement("div",{className:"main-content",ref:"mainContent"},l.a.createElement(S,Object.assign({},this.props,{brandText:this.getBrandText(this.props.location.pathname)})),l.a.createElement(o.d,null,this.getRoutes(Xe)),l.a.createElement(o.a,{to:"/admin/index"}),l.a.createElement(i.a,{fluid:!0},l.a.createElement(j,null))))}}var Ke=Ze;class $e extends l.a.Component{render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{className:"navbar-top navbar-horizontal navbar-dark",expand:"md"},l.a.createElement(i.a,{className:"px-4"},l.a.createElement(V.a,null,l.a.createElement("img",{alt:"...",src:t(480)})),l.a.createElement("button",{className:"navbar-toggler",id:"navbar-collapse-main"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement(Me.a,{navbar:!0,toggler:"#navbar-collapse-main"},l.a.createElement("div",{className:"navbar-collapse-header d-md-none"},l.a.createElement(D.a,null,l.a.createElement(A.a,{className:"collapse-brand",xs:"6"},l.a.createElement(c.b,{to:"/"},l.a.createElement("img",{alt:"...",src:t(196)}))),l.a.createElement(A.a,{className:"collapse-close",xs:"6"},l.a.createElement("button",{className:"navbar-toggler",id:"navbar-collapse-main"},l.a.createElement("span",null),l.a.createElement("span",null))))),l.a.createElement(v.a,{className:"ml-auto",navbar:!0},l.a.createElement(M.a,null,l.a.createElement(T.a,{className:"nav-link-icon",href:"https://rodrigo740.github.io/",target:"_blank"},l.a.createElement("i",{className:"ni ni-planet"}),l.a.createElement("span",{className:"nav-link-inner--text"},"Site"))),l.a.createElement(M.a,null,l.a.createElement(T.a,{className:"nav-link-icon",to:"/auth/login",tag:c.b},l.a.createElement("i",{className:"ni ni-key-25"}),l.a.createElement("span",{className:"nav-link-inner--text"},"Login"))),l.a.createElement(M.a,null,l.a.createElement(T.a,{className:"nav-link-icon",to:"/auth/register",tag:c.b},l.a.createElement("i",{className:"ni ni-circle-08"}),l.a.createElement("span",{className:"nav-link-inner--text"},"Register"))))))))}}var ea=$e;class aa extends l.a.Component{render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("footer",{className:"py-5"},l.a.createElement(i.a,null,l.a.createElement(D.a,{className:"align-items-center justify-content-xl-between"},l.a.createElement(A.a,{xl:"6"},l.a.createElement("div",{className:"copyright text-center text-xl-left text-muted"},"2020"," ",l.a.createElement("a",{className:"font-weight-bold ml-1",href:"https://rodrigo740.github.io/",target:"_blank"},"Project ARC Team"))),l.a.createElement(A.a,{xl:"2"},l.a.createElement("div",{className:"copyright text-center  text-muted"},l.a.createElement("a",{href:"https://www.bosch.pt/",target:"_blank"},l.a.createElement("img",{id:"grayscale",alt:"...",className:"grayscale",height:45,width:125,src:t(132)})))),l.a.createElement(A.a,{xl:"2"},l.a.createElement("div",{className:"copyright text-center  text-muted"},l.a.createElement("a",{href:"https://www.it.pt",target:"_blank"},l.a.createElement("img",{alt:"...",className:"grayscale",height:45,width:125,src:t(133)})))),l.a.createElement(A.a,{xl:"2"},l.a.createElement("div",{className:"copyright text-center  text-muted"},l.a.createElement("a",{href:"https://www.ua.pt",target:"_blank"},l.a.createElement("img",{alt:"...",className:"grayscale",height:45,width:125,src:t(134)}))))))))}}var ta=aa;class na extends l.a.Component{constructor(...e){super(...e),this.getRoutes=e=>e.map((e,a)=>"/auth"===e.layout?l.a.createElement(o.b,{path:e.layout+e.path,component:e.component,key:a}):null)}componentDidMount(){document.body.classList.add("bg-default")}componentWillUnmount(){document.body.classList.remove("bg-default")}render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content"},l.a.createElement(ea,null),l.a.createElement("div",{className:"header bg-gradient-info py-7 py-lg-8"},l.a.createElement(i.a,null,l.a.createElement("div",{className:"header-body text-center mb-7"},l.a.createElement(D.a,{className:"justify-content-center"},l.a.createElement(A.a,{lg:"5",md:"6"},l.a.createElement("h1",{className:"text-white"},"Welcome!"),l.a.createElement("p",{className:"text-lead text-light"},"Log in into your account.",l.a.createElement("br",null),"If you still do not have an account, please register."))))),l.a.createElement("div",{className:"separator separator-bottom separator-skew zindex-100"},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 2560 100",x:"0",y:"0"},l.a.createElement("polygon",{className:"fill-default",points:"2560 0 2560 100 0 100"})))),l.a.createElement(i.a,{className:"mt--8 pb-5"},l.a.createElement(D.a,{className:"justify-content-center"},l.a.createElement(o.d,null,this.getRoutes(Xe),l.a.createElement(o.a,{from:"*",to:"/auth/login"}))))),l.a.createElement(ta,null))}}var la=na;r.a.render(l.a.createElement(c.a,{hashType:"noslash"},l.a.createElement(o.d,null,l.a.createElement(o.b,{strict:!0,path:"/admin",render:e=>l.a.createElement(Ke,e)}),l.a.createElement(o.b,{strict:!0,path:"/auth",render:e=>l.a.createElement(la,e)}),l.a.createElement(o.a,{to:"/auth/login"}))),document.getElementById("root"))},57:function(e,a,t){}},[[210,1,2]]]);
//# sourceMappingURL=main.14c6fff2.chunk.js.map