{"ast":null,"code":"/*!\n\n=========================================================\n* Argon Dashboard React - v1.1.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/argon-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/argon-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/import React,{Component}from'react';import'./style.css';// reactstrap components\nimport{Button,Card,CardHeader,CardBody,FormGroup,Form,Input,Container,Row,Col}from\"reactstrap\";// core components\nimport UserHeader from\"../../components/Headers/UserHeader.js\";import Header from\"../../components/Headers/Header.js\";import{Redirect}from\"react-router-dom\";const webSocket=new WebSocket(\"ws://127.0.0.1:5000\");webSocket.onmessage=event=>{handleSignallingData(JSON.parse(event.data));};let localStream;let peerConn;let username;let isAudio=true;let isVideo=true;function handleSignallingData(data){switch(data.type){case\"offer\":peerConn.setRemoteDescription(data.offer);createAndSendAnswer();break;case\"candidate\":peerConn.addIceCandidate(data.candidate);}}function createAndSendAnswer(){peerConn.createAnswer(answer=>{peerConn.setLocalDescription(answer);sendData({type:\"send_answer\",answer:answer});},error=>{console.log(error);});}function sendData(data){data.username=username;webSocket.send(JSON.stringify(data));}function joinCall(){username=document.getElementById(\"username-input\").value;document.getElementById(\"video-call-div\").style.display=\"inline\";navigator.getUserMedia({video:{frameRate:24,width:{min:480,ideal:720,max:1280},aspectRatio:1.33333},audio:true},stream=>{localStream=stream;document.getElementById(\"local-video\").srcObject=localStream;let configuration={iceServers:[{\"urls\":[\"stun:stun.l.google.com:19302\",\"stun:stun1.l.google.com:19302\",\"stun:stun2.l.google.com:19302\"]}]};peerConn=new RTCPeerConnection(configuration);peerConn.addStream(localStream);peerConn.onaddstream=e=>{document.getElementById(\"remote-video\").srcObject=e.stream;};peerConn.onicecandidate=e=>{if(e.candidate==null)return;sendData({type:\"send_candidate\",candidate:e.candidate});};sendData({type:\"join_call\"});},error=>{console.log(error);});}function muteAudio(){isAudio=!isAudio;localStream.getAudioTracks()[0].enabled=isAudio;}function muteVideo(){isVideo=!isVideo;localStream.getVideoTracks()[0].enabled=isVideo;}class Video_Call_Receiver extends Component{constructor(props){super(props);this.state={};}render(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(\"div\",{className:\"Video_Call_Receiver\"},/*#__PURE__*/React.createElement(Input,{placeholder:\"Enter username...\",type:\"text\",id:\"username-input\",\"text-align\":\"center\"}),/*#__PURE__*/React.createElement(Button,{onclick:joinCall},\"Join Call\"),/*#__PURE__*/React.createElement(\"div\",{id:\"video-call-div\"},/*#__PURE__*/React.createElement(\"video\",{muted:true,id:\"local-video\",autoplay:true}),/*#__PURE__*/React.createElement(\"video\",{id:\"remote-video\",autoplay:true}),/*#__PURE__*/React.createElement(\"div\",{class:\"call-action-div\"},/*#__PURE__*/React.createElement(Button,{onclick:muteVideo},\"Mute Video\"),/*#__PURE__*/React.createElement(Button,{onclick:muteAudio},\"Mute Audio\")))));}}export default Video_Call_Receiver;","map":{"version":3,"sources":["/home/raquel/Desktop/arc2-webapp/react_frontend/src/views/examples/Video_Call_Receiver.js"],"names":["React","Component","Button","Card","CardHeader","CardBody","FormGroup","Form","Input","Container","Row","Col","UserHeader","Header","Redirect","webSocket","WebSocket","onmessage","event","handleSignallingData","JSON","parse","data","localStream","peerConn","username","isAudio","isVideo","type","setRemoteDescription","offer","createAndSendAnswer","addIceCandidate","candidate","createAnswer","answer","setLocalDescription","sendData","error","console","log","send","stringify","joinCall","document","getElementById","value","style","display","navigator","getUserMedia","video","frameRate","width","min","ideal","max","aspectRatio","audio","stream","srcObject","configuration","iceServers","RTCPeerConnection","addStream","onaddstream","e","onicecandidate","muteAudio","getAudioTracks","enabled","muteVideo","getVideoTracks","Video_Call_Receiver","constructor","props","state","render"],"mappings":"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","sourcesContent":["/*!\n\n=========================================================\n* Argon Dashboard React - v1.1.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/argon-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/argon-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/\nimport React, { Component } from 'react';\nimport './style.css'\n\n// reactstrap components\nimport {\n  Button,\n  Card,\n  CardHeader,\n  CardBody,\n  FormGroup,\n  Form,\n  Input,\n  Container,\n  Row,\n  Col\n} from \"reactstrap\";\n// core components\nimport UserHeader from \"../../components/Headers/UserHeader.js\";\nimport Header from \"../../components/Headers/Header.js\";\n\nimport {Redirect} from \"react-router-dom\";\n\nconst webSocket = new WebSocket(\"ws://127.0.0.1:5000\")\nwebSocket.onmessage = (event) => {\n  handleSignallingData(JSON.parse(event.data))\n}\n\nlet localStream\nlet peerConn\nlet username\nlet isAudio = true\nlet isVideo = true\n\nfunction handleSignallingData(data) {\n  switch (data.type) {\n      case \"offer\":\n          peerConn.setRemoteDescription(data.offer)\n          createAndSendAnswer()\n          break\n      case \"candidate\":\n          peerConn.addIceCandidate(data.candidate)\n  }\n}\n\nfunction createAndSendAnswer () {\n  peerConn.createAnswer((answer) => {\n      peerConn.setLocalDescription(answer)\n      sendData({\n          type: \"send_answer\",\n          answer: answer\n      })\n  }, error => {\n      console.log(error)\n  })\n}\n\nfunction sendData(data) {\n  data.username = username\n  webSocket.send(JSON.stringify(data))\n}\n\n\n\nfunction joinCall() {\n\n  username = document.getElementById(\"username-input\").value\n\n  document.getElementById(\"video-call-div\")\n  .style.display = \"inline\"\n\n  navigator.getUserMedia({\n      video: {\n          frameRate: 24,\n          width: {\n              min: 480, ideal: 720, max: 1280\n          },\n          aspectRatio: 1.33333\n      },\n      audio: true\n  }, (stream) => {\n      localStream = stream\n      document.getElementById(\"local-video\").srcObject = localStream\n\n      let configuration = {\n          iceServers: [\n              {\n                  \"urls\": [\"stun:stun.l.google.com:19302\", \n                  \"stun:stun1.l.google.com:19302\", \n                  \"stun:stun2.l.google.com:19302\"]\n              }\n          ]\n      }\n\n      peerConn = new RTCPeerConnection(configuration)\n      peerConn.addStream(localStream)\n\n      peerConn.onaddstream = (e) => {\n          document.getElementById(\"remote-video\")\n          .srcObject = e.stream\n      }\n\n      peerConn.onicecandidate = ((e) => {\n          if (e.candidate == null)\n              return\n          \n          sendData({\n              type: \"send_candidate\",\n              candidate: e.candidate\n          })\n      })\n\n      sendData({\n          type: \"join_call\"\n      })\n\n  }, (error) => {\n      console.log(error)\n  })\n}\n\n\nfunction muteAudio() {\n  isAudio = !isAudio\n  localStream.getAudioTracks()[0].enabled = isAudio\n}\n\n\nfunction muteVideo() {\n  isVideo = !isVideo\n  localStream.getVideoTracks()[0].enabled = isVideo\n}\n\n\nclass Video_Call_Receiver extends Component {\n  constructor(props) {\n    super(props);\n    this.state ={}\n  }\n\n  \n\n\n  render() {\n    return (\n      <>\n      <Header />\n        <div className=\"Video_Call_Receiver\" >\n            <Input placeholder=\"Enter username...\"\n                type=\"text\"\n                id=\"username-input\" text-align=\"center\" />\n            <Button onclick={joinCall}>Join Call</Button>\n            <div id=\"video-call-div\">\n                <video muted id=\"local-video\" autoplay></video>\n                <video id=\"remote-video\" autoplay></video>\n                <div class=\"call-action-div\">\n                    <Button onclick={muteVideo}>Mute Video</Button>\n                    <Button onclick={muteAudio}>Mute Audio</Button>\n                </div>\n            </div>\n        </div>\n      </>\n    );\n  \n  }\n}\n\nexport default Video_Call_Receiver;\n"]},"metadata":{},"sourceType":"module"}